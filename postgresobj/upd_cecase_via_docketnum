begin
		CREATE OR REPLACE FUNCTION upd_cecase_via_docketnum() RETURNS TRIGGER AS $$
    BEGIN
        --
        -- Perform the required operation on emp, and create a row in emp_audit
        -- to reflect the change made to emp.
  
        set temp_citationid = NEW.citation_citationid;

        CREATE TEMP TABLE IF NOT EXISTS temp_table AS
        SELECT citationviolationid FROM citation_violation where  citation.citationid  = temp.citationid;
        set temp_citationviolationid = citationviolationid;

        SELECT cecase_id FROM codeviolation WHERE violationid =temp_citationviolationid
        FROM citation;
       
        set temp_codevio_cecase  = temp_cecaseid;
       
        SELECT * FROM cecase where  temp.cecaseid = cecase.caseid;
 
        set temp.cecase.caseid = cecase.caseid;
    
        IF (TG_OP = 'DELETE') THEN
            OLD.last_updated = now()
            OLD.last_user = user;
            INSERT INTO cecase VALUES(OLD.*)
            RETURN OLD
        ELSIF (TG_OP = 'UPDATE') THEN
            select 
            NEW.lastupdatedby_userid = now()
            NEW.cecase.lastupdatedby_userid = user
            INSERT INTO cecase VALUES(NEW.*)
            RETURN NEW
        ELSIF (TG_OP = 'INSERT') then
        
            NEW.lastupdatedby_userid = now()
            NEW.cecase.lastupdatedby_userid = user
            INSERT INTO cecase VALUES(NEW.*)
            RETURN NEW
        END IF;
        RETURN { status | 1 }    
  END;   
  $$ LANGUAGE plpgsql;
  END;

