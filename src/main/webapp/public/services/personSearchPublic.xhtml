<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="css/style.css"/>
        <title>TCVCOG Code Enforcement Home</title>
    </h:head>
    <h:body>
        <ui:composition template="./../navContainer_public.xhtml">

            <ui:define name="content">
                <f:view id="sysHomeView">

                    <div class="mainContainer">

                        <h:messages id="personSearchPublicMessages" globalOnly="true" showDetail="true" showSummary="true"
                                    warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError">
                        </h:messages>


                        <h1>Public Data Access Portal</h1>

                        <h:form id="personSearchPublicForm">
                            
                            <h:outputText>Display search pane: last name, dropdown box for a variety of field options, user chooses from those fields
                            TODO: Make method on personIntegrator and occupancyCoordinator to carry out public person search. Validate the length of the search string for last name,
                            and the length of string for chosen field (phone number, street etc. String can be anywhere within that field.) Coordinator will get arrayList of persons, 
                            and will anonymize data before sending it to BackingBean. Results will be displayed in dataScroller. Each item will have two buttons: this is the correct person, no changes
                            are required, or this person's info is incorrect, and must be updated. Depending on which button is chosen, they are routed to either requiredPersons page, or to a page to 
                            edit the data for the chosen person. Clone is created here.
                            
                            Must pull activePersonType from session bean and display to user "You are searching for a {owner, tenant, manager, etc}. Button says "Select this person as {owner etc.}"
                            
                            </h:outputText>

                        </h:form>
                        
                        
                        
                                <p:confirmDialog message="Type your message to the code enforcement staff in the box below." 
                                                      severity="alert" widgetVar="messageDialog">

                                    <h:form id="messageForm">
                                        
                                        
                                        <h:outputText value="You are attaching a note to bundle with a type: #{publicInfoBB.selectedBundle.typeName}"/>
                                        
                                        <p:spacer height="15px"/>
                                        <p:inputTextarea id="message-ita" style="width: 300px; height: 200px;" value="#{publicInfoBB.publicMessage}"/>
                                        <p:spacer height="15px"/>
                                        <p:commandButton ajax="true" actionListener="#{publicInfoBB.attachMessage}"
                                                         value="Submit" icon="fa fa-link" oncomplete="PF('messageDialog').hide()" 
                                                         update="paccSearchMessages
                                                                messageForm:message-ita"/>
                                        <p>Please note that all messages submitted through this portal become part of the permanent case record
                                        and may be included in documents prepare for town councils and magistrates. </p>
                                    </h:form>
                                </p:confirmDialog>
                                
                        
                        
                    </div>
                </f:view>

            </ui:define>
        </ui:composition>
    </h:body>
</html>

