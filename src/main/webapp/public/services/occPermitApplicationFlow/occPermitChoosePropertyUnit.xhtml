<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link rel="stylesheet" type="text/css" href="css/style.css"></link>
        <title>Choose a property</title>
    </h:head>
    <h:body>
        <ui:composition template="./../../navContainer_public.xhtml">
            <ui:define name="content">
                <f:view id="occPermitApplicationFlowView">
                    <h:form id="occPermitApplicationChoosePropertyForm">                          

                        <!-- VALIDATION MESSAGE -->
                        <p:growl id="growl" showDetail="false"/>

                        <!-- MAIN CONTAINER -->
                        <div class="mainContainer">

                            <!-- TITLE COMPONENT -->
                            <div class="public-title">
                                <div class="public-title-main">
                                    Apply For An Occupancy Permit
                                </div>
                                <div class="public-title-sub">
                                    Step 2: Select A Property In <h:outputText value="#{occPermitApplicationBB.selectedMuni.muniName}"/>
                                </div>
                            </div>

                            <!-- CONTENTS CONTAINER -->
                            <div class="public-main-contents-containner">

                                <!--CONTENT MAIN COMPONENT -->
                                <div class="public-main-contents">

                                    <!-- GUIDANCE COMPONENT -->
                                    <div class="public-guide occpermit">
                                        <p:steps activeIndex="1" styleClass="custom" >
                                            <p:menuitem value="Step 1: Choose Municipality" containerStyleClass="complete"/>
                                            <p:menuitem value="Step 2: Choose Property" />
                                            <p:menuitem value="Step 3: Configure Unit List" />
                                            <p:menuitem value="Step 4: Select Units" />
                                            <p:menuitem value="Step 5: Choose Reason" />
                                            <p:menuitem value="Step 6: Add People" />
                                            <p:menuitem value="Step 7: Review And Submit" />
                                        </p:steps>
                                    </div>

                                    <!-- CONTENT IO COMPONENT -->
                                    <div class="public-main-contents-io">
                                        <p>
                                            1. Please search for and select the property of concern using this search tool.
                                        </p>

                                        <div class="ui-g data-container">
                                            <div class="ui-g-12 ui-md-12 ui-lg-5 data_field">
                                                <p:inputText id="propSearchHouseNumIT" 
                                                             value="#{occPermitApplicationBB.houseNum}" 
                                                             tabindex="1" 
                                                             required="false"
                                                             styleClass="data_field_value"
                                                             placeholder="House Number"
                                                             />
                                            </div>
                                            <div class="ui-g-12 ui-md-12 ui-lg-5 data_field">
                                                <p:inputText id="propSearchStreetIT" 
                                                             value="#{occPermitApplicationBB.streetName}" 
                                                             tabindex="2" 
                                                             required="false" 
                                                             styleClass="data_field_value"
                                                             placeholder="Street Name"
                                                             />
                                            </div>
                                            <div class="ui-g-12 ui-md-12 ui-lg-2 data_field">
                                                <p:commandButton value="Search" 
                                                                 tabindex="3" ajax="false" 
                                                                 icon="fa fa-search"
                                                                 action="#{occPermitApplicationBB.searchForPropertiesSingleMuni}" 
                                                                 update="propSearchHouseNumIT
                                                                 propSearchStreetIT
                                                                 propertyResultTable"
                                                                 style="float: right"
                                                                 />
                                            </div>
                                        </div>

                                        <p>2. If the property you are looking for is not below, try searching again.
                                            If it is, please select it and click the button labeled 
                                            "Confirm and Continue" at the bottom of the page.
                                        </p>

                                        <p>Search Results:</p>
                                        
                                        <p:dataTable id="propertyResultTable"
                                                     var="prop" 
                                                     value="#{occPermitApplicationBB.propList}"
                                                     selectionMode="single" 
                                                     tabindex="4"
                                                     scrollable="true" 
                                                     scrollHeight="120" 
                                                     selection="#{occPermitApplicationBB.selectedProperty}"
                                                     rowKey="#{prop.bundledProperty.propertyID}">

                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Address" />
                                                </f:facet>
                                                <h:outputText value="#{prop.bundledProperty.address}"/>
                                            </p:column>


                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Type" />
                                                </f:facet>
                                                <h:outputText value="#{prop.bundledProperty.useType.name}"/>
                                            </p:column>

                                        </p:dataTable>


                                    </div>

                                    <!-- CONTENT BUTTON -->
                                    <div class="public-main-contents-button">
                                        <p:commandButton id="goBack" ajax="false"
                                                         process="@none" immediate="true"
                                                         value="Go Back" styleClass="buttonOwnLine"
                                                         action="#{occPermitApplicationBB.goBack()}"/>
                                        <p:commandButton ajax="false"
                                                         value="Next step: Configure Unit List" 
                                                         action="#{occPermitApplicationBB.selectProperty}" 
                                                         style="width: 100%" styleClass="buttonOwnLine"/>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:form>
                </f:view>
            </ui:define>
        </ui:composition>
    </h:body>
</html>