<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link rel="stylesheet" type="text/css" href="css/style.css"></link>
        <title>Enter action requestor details</title>
    </h:head>
    <h:body>
        <ui:composition template="./../../navContainer_public.xhtml">
            <ui:define name="content">
                <f:view id="pers-info-view">

                    <div class="mainContainer">

                        <!--Global Messages-->
                        <h:form id="pers-info-messages-form">
                            <p:messages id="pers-info-messages" globalOnly="true" showDetail="true" showSummary="true" />
                        </h:form>

                        <p:panel id="self-info-panel"
                                 toggleable="true"
                                 widgetVar="self-info-panel-var"
                                 collapsed="false"
                                 header="Option 1: Request action as yourself"
                                 rendered="#{!(empty sessionBean.sessUser)}">

                            <h:form id="self-info-form">

                                <!--Grid CSS From Primefaces-->
                                <div class="ui-g data-container">

                                    <div class="ui-g-12 ui-md-9 ui-lg-9 data_field">
                                        <h:outputLabel styleClass="data_table_header" 
                                                       value="Use this option when you identified the code enforcement concern yourself." />
                                    </div>

                                    <div class="ui-g-12 ui-md-3 ui-lg-3 data_field">
                                        <p:commandButton ajax="false" tabindex="1"
                                                         id="ceactionrequest-requestasyourself-cb"
                                                         value="Request as yourself: #{sessionBean.sessUser.person.firstName} #{sessionBean.sessUser.person.lastName} (user ID #{sessionBean.sessUser.userID})" 
                                                         action="#{cEActionRequestSubmitBB.requestActionAsFacesUser}"
                                                         />   
                                    </div>
                                </div>

                            </h:form>

                        </p:panel>

                        <p:panel id="behalf-info-panel"
                                 toggleable="true"
                                 widgetVar="behalf-info-panel-var"
                                 collapsed="false"
                                 header="Option 2: Request action on behalf of existing person"
                                 rendered="#{!(empty sessionBean.sessUser)}">

                            <h:form id="behalf-info-form">

                                <!--Grid CSS From Primefaces-->
                                <div class="ui-g data-container">

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Persons connected to #{cEActionRequestSubmitBB.currentRequest.requestProperty.address}:"/>
                                        <p:selectOneMenu id="person-list-menu" 
                                                         required="false" tabindex="2" styleClass="data_field_value"
                                                         value="#{cEActionRequestSubmitBB.currentPerson}"
                                                         disabled="#{cEActionRequestSubmitBB.personCandidateList.size() == 0}">
                                            <f:selectItem itemLabel="select a person..." noSelectionOption="true" />
                                            <f:selectItems value="#{cEActionRequestSubmitBB.personCandidateList}"  var="p" itemValue="#{p}" 
                                                           itemLabel="#{p.firstName} #{p.lastName} (id:#{p.personID})"/>
                                            <f:converter converterId="personConverter"/>

                                            <p:ajax     listener="#{cEActionRequestSubmitBB.changePropertyPersonsDropDown}"
                                                        update="ceactionrequestflow-requestasprpertyperson-cb" />
                                        </p:selectOneMenu>
                                        <h:message for="person-list-menu" showDetail="false" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Recently viewed Persons:"/>
                                        <p:selectOneMenu id="recent-person-list-menu" 
                                                         required="false" tabindex="2"
                                                         value="#{cEActionRequestSubmitBB.currentPerson}"
                                                         disabled="#{sessionBean.sessPropertyList.size() == 0}"
                                                         styleClass="data_field_value">
                                            <f:selectItem itemLabel="select a person..." noSelectionOption="true" />
                                            <f:selectItems value="#{sessionBean.sessPersonList}"  var="p" itemValue="#{p}" 
                                                           itemLabel="#{p.firstName} #{p.lastName} (id:#{p.personID})"/>
                                            <f:converter converterId="personConverter"/>

                                            <p:ajax     listener="#{cEActionRequestSubmitBB.changePropertyPersonsDropDown}"
                                                        update="ceactionrequestflow-requestasprpertyperson-cb" />
                                            <h:message for="recent-person-list-menu" showDetail="false" showSummary="true" 
                                                       warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                        </p:selectOneMenu>
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <p:commandButton ajax="false"  tabindex="3"
                                                         id="ceactionrequestflow-requestasprpertyperson-cb"
                                                         value="Request on behalf of: #{cEActionRequestSubmitBB.currentPerson.firstName} #{cEActionRequestSubmitBB.currentPerson.lastName}" 
                                                         action="#{cEActionRequestSubmitBB.assignSelectedRequestorPersonAndContinue}"
                                                         disabled="#{empty cEActionRequestSubmitBB.currentPerson}"
                                                         styleClass="data_edit_button"/>
                                    </div>

                                </div>

                            </h:form>

                        </p:panel>

                        <p:panel id="pers-info-panel"
                                 toggleable="true"
                                 widgetVar="pers-info-panel-var"
                                 collapsed="false"
                                 header="#{(empty sessionBsessionUserUser)? 'Enter your contact details' : 'Option 3: Input a new person'}">

                            <h:form id="pers-info-form">

                                <!--Grid CSS From Primefaces-->
                                <div class="ui-g data-container">


                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Please choose the most appropriate role from the list"/>
                                        <p:selectOneMenu 
                                            id="requestorType" 
                                            required="true" tabindex="4"
                                            value="#{cEActionRequestSubmitBB.currentRequest.requestor.personType}"
                                            disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"
                                            styleClass="data_field_value">

                                            <f:selectItems 
                                                value="#{cEActionRequestSubmitBB.submittingPersonTypes}"
                                                var="p" 
                                                itemValue="#{p}"
                                                itemLabel="#{p.label}"/>

                                        </p:selectOneMenu>
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="First Name*"/>
                                        <h:inputText 
                                            id="requestorFirstName" size="30"  tabindex="5"
                                            value="#{cEActionRequestSubmitBB.currentRequest.requestor.firstName}" styleClass="data_field_value" 
                                            required="true"
                                            disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"
                                            />
                                        <h:message for="requestorFirstName" showDetail="false" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Last Name*"/>
                                        <h:inputText id="requestorLastName" size="30" value="#{cEActionRequestSubmitBB.currentRequest.requestor.lastName}" 
                                                     styleClass="inputText" required="false" tabindex="6"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorLastName" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Job Title (if applicable)"/>
                                        <h:inputText id="requestorJobTitle" size="30" value="#{cEActionRequestSubmitBB.currentRequest.requestor.jobTitle}" 
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"
                                                     styleClass="data_field_value" required="false" tabindex="7"/>
                                        <h:message for="requestorJobTitle" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Phone (cell)"/>
                                        <h:inputText id="requestorPhoneCell" size="15" value="#{cEActionRequestSubmitBB.currentRequest.requestor.phoneCell}" 
                                                     styleClass="data_field_value" required="false" tabindex="8"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorPhoneCell" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Phone (home)"/>
                                        <h:inputText id="requestorPhoneHome" size="15" value="#{cEActionRequestSubmitBB.currentRequest.requestor.phoneHome}" 
                                                     styleClass="data_field_value" required="false" tabindex="9"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorPhoneHome" showDetail="false" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Email"/>
                                        <h:inputText id="requestorEmail" size="30" value="#{cEActionRequestSubmitBB.currentRequest.requestor.email}" 
                                                     styleClass="data_field_value" required="false" tabindex="11"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorEmail" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="Street Address*"/>
                                        <h:inputText id="requestorAddressStreet" size="30" value="#{cEActionRequestSubmitBB.currentRequest.requestor.addressStreet}" 
                                                     styleClass="data_field_value" required="false" tabindex="12"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorAddressStreet" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="City*"/>
                                        <h:inputText id="requestorAddressCity" size="30" value="#{cEActionRequestSubmitBB.currentRequest.requestor.addressCity}" 
                                                     styleClass="data_field_value" required="false" tabindex="13"
                                                     disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                        <h:message for="requestorAddressCity" showDetail="true" showSummary="true" 
                                                   warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="ZIP Code*"/>
                                        <h:inputText id="requestorAddressZip" size="10" value="#{cEActionRequestSubmitBB.currentRequest.requestor.addressZip}" 
                                                 styleClass="data_field_value" required="false" tabindex="14"
                                                 disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                    <h:message for="requestorAddressZip" showDetail="true" showSummary="true" 
                                               warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                    <div class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                        <h:outputLabel styleClass="data_field_label" value="State Abbreviation*"/>
                                        <h:inputText id="requestorAddressState" size="2" value="#{cEActionRequestSubmitBB.currentRequest.requestor.addressState}" 
                                                 styleClass="data_field_value" required="true" tabindex="15"
                                                 disabled="#{cEActionRequestSubmitBB.disabledPersonFormFields}"/>
                                    <h:message for="requestorAddressState" showDetail="true" showSummary="true" 
                                               warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />
                                    </div>

                                </div>

                                <p:commandButton ajax="false" value="Store new person and continue" 
                                             id="ceactionrequestflow-storenewperson-cb" tabindex="16"
                                             action="#{cEActionRequestSubmitBB.validateActionRequestorNewPersonAndContinue}"/>
                                
                            </h:form>

                        </p:panel>

                    </div>

                </f:view>

            </ui:define>

        </ui:composition>

    </h:body>

</html>


