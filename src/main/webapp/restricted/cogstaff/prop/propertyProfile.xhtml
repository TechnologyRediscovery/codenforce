<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link rel="stylesheet" type="text/css" href="css/style.css"></link>
        <title>Property Profile</title>
    </h:head>
    <h:body>
        <ui:composition template="/restricted/navContainer_restricted.xhtml">
            <ui:define name="content">
                <f:view id="prop-info-view">

                    <!-- GLOBAL MESSAGES -->
                    <h:form id="form-messages-global">
                        <p:growl id="messages-global" showDetail="false"/>
                    </h:form>

                    <div class="mainContainer">

                        <div class="page-links">
                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#propinfo-panel-info">property info</a>
                            </div>

                            <h:outputText value=" | " />

                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-cases-panel">
                                    <h:outputText value="code enf cases (#{propertyProfileBB.currentProperty.ceCaseList.size()})" />
                                </a>
                            </div>

                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-periods-panel">
                                    <h:outputText value="occupancy periods (#{propertyProfileBB.currentProperty.completePeriodList.size()})" />
                                </a>
                            </div>

                            <h:outputText value=" | " />

                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-units-panel">
                                    <h:outputText value="units (#{propertyProfileBB.currentProperty.unitWithListsList.size()})" />
                                </a>
                            </div>

                            <h:outputText value=" | " />

                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-persons-panel">
                                    <h:outputText value="persons (#{propertyProfileBB.currentProperty.humanLinkList.size()})" />
                                </a>
                            </div>

                            <h:outputText value=" | " />

                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-events-panel">
                                    <h:outputText value="events (#{propertyProfileBB.currentProperty.completeEventList.size()})" />
                                </a>
                            </div>

                            <h:outputText value=" | " />


                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#propinfo-notes-panel">notes</a>
                            </div>

                            <h:outputText value=" | " />


                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-blobs-panel">docs and photos</a>
                            </div>
                            <h:outputText value=" | " />


                            <div class="restrict-main-contents-io-link link-button">
                                <a href="#prop-extinfo-panel">external data</a>
                            </div>
                        </div>

                        <!-- DATA CONTAINER -->
                        <div class="p-grid nested-grid">

                            <!-- OBJECT DATA CONTAINER --> 
                            <div class="p-col">

                             

                                <!-- OBJECT DATA PANEL--> 
                                <p:panel id="parcel-id-panel"
                                         toggleable="true"
                                         collapsed="false"
                                         header="Parcel #{propertyProfileBB.currentProperty.countyParcelID} (#{propertyProfileBB.currentProperty.muni.muniName})"
                                         rendered="true"
                                         >
                                    <h:form id="parcel-id-form">


                                        <p:commandButton id="parcel-id-edit-button"
                                                         value="#{propertyProfileBB.currentPropertyEditMode ? 'Save changes' : 'Edit'}"
                                                         rendered="true"
                                                         ajax="true"
                                                         icon="fa #{propertyProfileBB.currentPropertyEditMode ? 'fa-check' : 'fa-pencil'}"
                                                         actionListener="#{propertyProfileBB.onPropertyEditModeToggleButtonChange}"
                                                         update="@form
                                                         form-messages-global"
                                                         />


                                        <div class="restrict-main-contents-io-button gray_button">

                                            <p:commandButton    id="parcel-id-edit-abort-button"
                                                                ajax="true"
                                                                rendered="#{propertyProfileBB.currentPropertyEditMode}"
                                                                value="Abort edit"
                                                                actionListener="#{propertyProfileBB.onPropertyEditModeOperationAbortButtonChange}"
                                                                update="form-messages-global
                                                                @form"
                                                                icon="fa fa-stop" />

                                        </div>

                                        <p:spacer height="5px"/>    




                                        <div class="p-grid">

                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="Parcel ID (County)"  />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.countyParcelID} "
                                                              rendered="#{!propertyProfileBB.currentPropertyEditMode}" />
                                                
                                                <p:inputText value="#{propertyProfileBB.currentProperty.countyParcelID}"
                                                             rendered="#{propertyProfileBB.currentPropertyEditMode}" />
                                                             
                                            </div>


                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="Municipality" />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.muni.muniName} (Muni Code:#{propertyProfileBB.currentProperty.muni.muniCode}) "/>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="InternalID" />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.propertyID} "/>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="Property Source" />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.source.title} "
                                                              rendered="#{!propertyProfileBB.currentPropertyEditMode}" />
                                                
                                                   <h:selectOneMenu id="property-id-source-som"
                                                                    value="#{propertyProfileBB.currentProperty.source}" style="width:175px;height:25px"
                                                                  rendered="#{propertyProfileBB.currentPropertyEditMode}" >
                                                    
                                                       <f:converter converterId="bobSourceConverter"/>
                                                    
                                                    <f:selectItem itemLabel="select a source..." noSelectionOption="true" />
                                                    
                                                    <f:selectItems id="parcel-info-source-selitems"
                                                                   value="#{propertyProfileBB.sourceList}"
                                                                   var="bs" itemValue="#{bs}" itemLabel="#{bs.title}"/>

                                                </h:selectOneMenu>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="Created" />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.createdTS)} "/>
                                                <h:outputText value="#{!empty propertyProfileBB.currentProperty.createdBy ? propertyProfileBB.currentProperty.createdBy.username : ''}"/>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputText value="Last Updated" />
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.lastUpdatedTS)}" />
                                            </div>

                                        </div>
                                    </h:form>
                                </p:panel>

                                <p:panel id="parcel-addresses-panel"
                                         toggleable="true"
                                         collapsed="false"
                                         header="Addresses on Parcel #{propertyProfileBB.currentProperty.countyParcelID} "
                                         rendered="true"
                                         >

                                    <h:form id="parcel-addresses-form">

                                        <p:commandButton id="parcel-address-add-init-cb"
                                                         ajax="true"
                                                         value="Connect Address"
                                                         icon="fa fa-plus"
                                                         actionListener="#{propertyProfileBB.onLinkNewAddressToParcelButtonChange}"
                                                         />

                                        <p:spacer height="5px" />

                                        <p:dataTable    id="parcel-addresses-table"
                                                        value="#{propertyProfileBB.currentProperty.addresses}"
                                                        var="pma"
                                                        rowKey="#{pma.addressID}"
                                                        tableStyleClass="primeDataTable"
                                                        draggableRows="true" 
                                                        tabindex="6">


                                            <p:column width="10%">
                                                <f:facet name="header">
                                                    <h:outputText value="ID"/>
                                                </f:facet>
                                                <h:outputText value="#{pma.addressID}" />
                                            </p:column>

                                            <p:column width="50%">
                                                <f:facet name="header">
                                                    <h:outputText value="Address"/>
                                                </f:facet>

                                                <h:outputText value="#{pma.addressPretty2LineEscapeFalse}"
                                                              escape="false"/>
                                                
                                                <p:spacer height="5px" />
                                                
                                                <h:outputText value="#{pma.addressPretty1Line}" />
                                            </p:column>

                                            <p:column width="25%">
                                                <f:facet name="header">
                                                    <h:outputText value="Actions"/>
                                                </f:facet>

                                                <p:commandLink      id="parcel-addr-actions-cl"
                                                                    ajax="true"
                                                                    actionListener="#{addressBB.onMailingAddressViewEditLinkClick(hmal)}"
                                                                    style="color:blue;"
                                                                    oncomplete="PF('address-dialog-var').show()"
                                                                    rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                                                                    update="address-info-form
                                                                    address-links-form"
                                                                    value="view/edit" />
                                            </p:column>
                                        </p:dataTable>
                                    </h:form>
                                </p:panel>

                                <p:panel id="parcel-info-panel"
                                         toggleable="true"
                                         collapsed="false"
                                         header="#{propertyProfileBB.currentProperty.countyParcelID} (#{propertyProfileBB.currentProperty.muni.muniName})"
                                         rendered="true"
                                         >
                                    <h:form id="parcel-info-form">

                                        <p:commandButton id="parcel-info-edit-button"
                                                         value="#{propertyProfileBB.currentParcelInfoEditMode ? 'Save changes' : 'Edit'}"
                                                         rendered="true"
                                                         ajax="true"
                                                         icon="fa #{propertyProfileBB.currentParcelInfoEditMode ? 'fa-check' : 'fa-pencil'}"
                                                         actionListener="#{propertyProfileBB.onParcelInfoEditModeToggleButtonChange}"
                                                         update="@form
                                                         form-messages-global"
                                                         />

                                        <div class="restrict-main-contents-io-button gray_button">

                                            <p:commandButton    id="parcel-info-edit-abort-button"
                                                                ajax="true"
                                                                rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                                value="Abort edit"
                                                                actionListener="#{propertyProfileBB.onParcelInfoEditModeOperationAbortButtonChange}"
                                                                update="form-messages-global
                                                                @form"
                                                                process="@none"
                                                                immediate="true"
                                                                icon="fa fa-stop" />

                                        </div>

                                        <p:spacer height="5px"/>    


                                        <div class="p-grid">

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Info record ID"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.parcelInfoID}" />
                                            </div>
                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="County"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.countyCode}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Condition"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.condition)
                                                                       ? propertyProfileBB.currentProperty.parcelInfo.condition.title
                                                                       : ''}"
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <h:selectOneMenu id="prop-add-condition-som"
                                                                 value="#{propertyProfileBB.currentProperty.parcelInfo.condition}" 
                                                                 style="width:100%;"
                                                                 rendered="#{propertyProfileBB.currentParcelInfoEditMode}" >
                                                    <f:converter converterId="intensityClassConverter"/>
                                                    <f:selectItem itemLabel="select a condition ..." noSelectionOption="true" />
                                                    <f:selectItems id="propinfoedit-condition-selitems"
                                                                   value="#{propertyProfileBB.conditionIntensityList}"
                                                                   var="ic" itemValue="#{ic}" itemLabel="#{ic.numericRating}: #{ic.title}"/>

                                                </h:selectOneMenu>


                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Use Type"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.useType.name}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}"  />

                                                <h:selectOneMenu id="prop-add-source-som"
                                                                 value="#{propertyProfileBB.currentProperty.parcelInfo.useType}" 
                                                                 style="width:100%;"
                                                                 rendered="#{propertyProfileBB.currentParcelInfoEditMode}" >
                                                    <f:converter converterId="propertyUseTypeConverter"/>
                                                    <f:selectItem itemLabel="select a use type..." noSelectionOption="true" />
                                                    <f:selectItems id="parcel-info-put-selitems"
                                                                   value="#{propertyProfileBB.putList}"
                                                                   var="put" itemValue="#{put}" itemLabel="#{put.name}"/>

                                                </h:selectOneMenu>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Non-Addressable"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.nonAddressable? 'Yes': 'No'}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <p:inputSwitch value="#{propertyProfileBB.currentProperty.parcelInfo.nonAddressable}"
                                                               onLabel="Non-addressable"
                                                               offLabel="Normal (addressable)"
                                                               rendered="#{propertyProfileBB.currentParcelInfoEditMode}"  />

                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="TCLB Held"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.landBankHeld ? 'Yes': 'No'}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <p:inputSwitch value="#{propertyProfileBB.currentProperty.parcelInfo.landBankHeld}"
                                                               onLabel="Held by TCLB"
                                                               offLabel="Not TCLB held"
                                                               rendered="#{propertyProfileBB.currentParcelInfoEditMode}"  />

                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Land bank prospect"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.landBankProspect)
                                                                       ? propertyProfileBB.currentProperty.parcelInfo.landBankProspect.title : ' '}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <h:selectOneMenu id="prop-add-landprospect-som"
                                                                 value="#{propertyProfileBB.currentProperty.parcelInfo.landBankProspect}" style="width:175px;height:25px"
                                                                 rendered="#{propertyProfileBB.currentParcelInfoEditMode}" >
                                                    <f:converter converterId="intensityClassConverter"/>
                                                    <f:selectItem itemLabel="select a muni..." noSelectionOption="true" />
                                                    <f:selectItems id="propinfoedit-landprospect-selitems"
                                                                   value="#{propertyProfileBB.landBankProspectIntensityList}"
                                                                   var="ic" itemValue="#{ic}" itemLabel="#{ic.numericRating}: #{ic.title}"/>

                                                </h:selectOneMenu>

                                            </div>


                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Info record source"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.currentProperty.parcelInfo.bobSource.title}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <h:selectOneMenu id="prop-info-source-som"
                                                                 value="#{propertyProfileBB.currentProperty.parcelInfo.bobSource}" style="width:175px;height:25px"
                                                                 rendered="#{propertyProfileBB.currentParcelInfoEditMode}" >
                                                    <f:converter converterId="bobSourceConverter"/>
                                                    <f:selectItem itemLabel="select a source..." noSelectionOption="true" />
                                                    <f:selectItems id="parcel-info-source-selitems"
                                                                   value="#{propertyProfileBB.sourceList}"
                                                                   var="bs" itemValue="#{bs}" itemLabel="#{bs.title}"/>

                                                </h:selectOneMenu>
                                            </div>

                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Info record creation"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.parcelInfo.createdTS)}" 
                                                              rendered="true" />
                                            </div>
                                            <div class="p-col-4 data_field_label">
                                                <h:outputLabel value="Info record last update"/>
                                            </div>
                                            <div class="p-col-8">
                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.parcelInfo.lastUpdatedTS)}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />
                                            </div>

                                            
                                            
                                            <div class="p-col-3" >
                                                <h:outputText value="&nbsp;"
                                                              escape="false" />
                                            </div>
                                            <div class="p-col-3" >
                                                <h:outputLabel value="Unfitness of Occupancy"/>
                                            </div>
                                            
                                            <div class="p-col-3" >
                                                <h:outputLabel value="Vacancy"/>
                                            </div>
                                            
                                            <div class="p-col-3" >
                                                <h:outputLabel value="Abandonment"/>
                                            </div>
                                            
                                            
                                            <div class="p-col-3">
                                                <h:outputLabel value="Start date" />
                                            </div>
                                            
                                            
                                            
                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-unfitstart-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.unfitDateStart) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.unfitDateStart) 
                                                                       : ''}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}"/>
                                                              

                                                <p:datePicker id="prop-add-unfit-start-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.unfitDateStart}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            showTime="false"
                                                            yearNavigator="true"
                                                            mask="true"
                                                            tabindex="16" >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                


                                            </div>
                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-vacantstart-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.vacantDateStart) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.vacantDateStart) 
                                                                       : ''}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <p:datePicker id="prop-add-vacant-start-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.vacantDateStart}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            yearNavigator="true"
                                                            showTime="false"
                                                            mask="true"
                                                            tabindex="16" >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                

                                            </div>
                                            
                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-abandonedstart-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.abandonedDateStart) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.abandonedDateStart) 
                                                                       : ''}" 
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />
                                                
                                                <p:datePicker id="prop-add-abandoned-start-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.abandonedDateStart}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            yearNavigator="true"
                                                            showTime="false"
                                                            mask="true"
                                                            tabindex="16"
                                                           >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                

                                            </div>

                                            <div class="p-col-3">
                                                <h:outputLabel value="End date" />
                                            </div>

                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-unfitstop-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.unfitDateStop) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.unfitDateStop) 
                                                                       : ''}"
                                                              rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />

                                                <p:datePicker id="prop-add-unfit-end-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.unfitDateStop}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            yearNavigator="true"
                                                            showTime="false"
                                                            mask="true"
                                                            tabindex="16" >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                
                                            </div>

                                          
                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-vacantstop-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.vacantDateStop) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.vacantDateStop) 
                                                                       : ''}" 
                                                            rendered="#{!propertyProfileBB.currentParcelInfoEditMode}" />
                                                
                                                <p:datePicker id="prop-add-vacant-stop-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.vacantDateStop}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            yearNavigator="true"
                                                            showTime="false"
                                                            mask="true"
                                                            tabindex="16"
                                                            >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                

                                            </div>

                                            <div class="p-col-3">
                                                <h:outputText id="propinfo-ot-abandonedstop-1"
                                                              value="#{!(empty propertyProfileBB.currentProperty.parcelInfo.abandonedDateStop) 
                                                                       ? propertyProfileBB.getPrettyLocalDateOnlyNoTime(propertyProfileBB.currentProperty.parcelInfo.abandonedDateStop) 
                                                                       : ''}" />
                                                
                                                <p:datePicker id="prop-add-abandoned-stop-cal"
                                                            value="#{propertyProfileBB.currentProperty.parcelInfo.abandonedDateStop}"
                                                            rendered="#{propertyProfileBB.currentParcelInfoEditMode}"
                                                            showButtonBar="true"
                                                            pattern="MM/dd/yyyy"
                                                            monthNavigator="true"
                                                            yearNavigator="true"
                                                            showTime="false"
                                                            mask="true"
                                                            tabindex="16"
                                                           >
                                                        <f:convertDateTime pattern="MM/dd/yyyy" type="localDate"/>
                                                </p:datePicker>
                                                
                                            </div>
                                        </div>


                                    </h:form>
                                </p:panel>

                                <p:panel id="propinfo-notes-panel"
                                         toggleable="true"
                                         collapsed="false"
                                         header="Property Notes"
                                         rendered="true"
                                         > 
                                    <h:form id="propinfo-notes-form">
                                        <h:messages id="propinfo-notes-messages"
                                                    globalOnly="true" showDetail="true" showSummary="true"
                                                    warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError">
                                        </h:messages>

                                        <div class="ui-g data-container">
                                            <p:commandButton   id="propinfo-notes-add-button"
                                                               rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                                               value="Add new note"  
                                                               icon="fa fa-sticky-note-o"
                                                               actionListener="#{propertyProfileBB.onNoteInitButtonChange}"
                                                               oncomplete="PF('propinfo-notes-dialog-var').show()"
                                                               update="propinfo-note-create-form" />
                                            <p:spacer height="5px" />
                                            <div    id="propinf-ot-notes-div"
                                                    class="data_field"
                                                    style="clear:both;">
                                                <h:outputLabel  styleClass="data_field_label"
                                                                for="propinfo-ot-notes"
                                                                value="Notes"/>

                                                <h:outputText   id="propinfo-ot-notes"
                                                                styleClass="data_field_value"
                                                                value="#{propertyProfileBB.currentProperty.notes}"
                                                                escape="false"/>
                                            </div>
                                        </div>

                                    </h:form>
                                </p:panel>
                             
                            </div>

                            <div class="p-col">
                                <p:panel    id="prop-persons-panel"
                                            toggleable="true"
                                            widgetVar="prop-events-panel-var"
                                            collapsed="false"
                                            header="Persons"
                                            rendered="true">
                                    <h:form id="prop-persons-panel-form">

                                        <p:commandButton   id="prop-persons-manage-button"
                                                           ajax="true"
                                                           actionListener="#{propertyProfileBB.onPersonConnectInitButtonChange}"
                                                           oncomplete="PF('prop-persons-manage-var').show()"
                                                           rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                                                           value="Link Person to Property"
                                                           icon="fa fa-user-plus"
                                                           />

                                        <p:spacer height="5px" />

                                        <p:dataTable id="prop-persons-table"
                                                     var="human"
                                                     value="#{propertyProfileBB.currentProperty.humanLinkList}"
                                                     tableStyleClass="primeDataTable"
                                                     rowKey="#{human.humanID}"
                                                     >

                                            <p:column headerText="Name"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{human.name}"/>



                                            </p:column>

                                            <p:column headerText="ID"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{human.humanID}"/>

                                            </p:column>

                                            <p:column headerText="Actions"
                                                      styleClass="centeredColumnContent">
                                                <p:commandLink      id="prop-person-exploreperson-button"
                                                                    ajax="true"
                                                                    style="color:blue;"
                                                                    action="#{personBB.onHumanViewLinkClick(human)}"
                                                                    value="View Person"
                                                                    oncomplete="PF('person-profile-dialog-var').show();"
                                                                    />

                                            </p:column>
                                        </p:dataTable>
                                    </h:form>
                                </p:panel>

                                <p:panel    id="prop-cases-panel"
                                            toggleable="true"
                                            widgetVar="prop-cases-panel-var"
                                            collapsed="false"
                                            header="Code Enforcement Cases"
                                            rendered="true">
                                    <h:form id="prop-cases-panel-form">

                                        <p:commandButton   id="prop-cases-newcase-button"
                                                           ajax="true"
                                                           actionListener="#{propertyProfileBB.onCECaseAddInitButtonChange}"
                                                           rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                                                           value="Create New Code Enforcement Case"
                                                           icon="fa fa-archive"
                                                           oncomplete="PF('cecase-add-dialog-var').show();"
                                                           update="cecase-add-dialog
                                                           cecase-add-form"
                                                           />

                                        <p:spacer height="5px" />

                                        <p:dataTable id="prop-cases-table"
                                                     var="cse"
                                                     value="#{propertyProfileBB.currentProperty.ceCaseList}"
                                                     tableStyleClass="primeDataTable"
                                                     rowKey="#{cse.caseID}"
                                                     >

                                            <p:column headerText="Date Opened"
                                                      styleClass="centeredColumnContent"
                                                      sortBy="#{cse.originationDate}">

                                                <h:outputText value="#{!(empty cse.originationDate) ? propertyProfileBB.getPrettyDate(cse.originationDate) : ''}"/>

                                            </p:column>

                                            <p:column headerText="Status"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{cse.statusBundle.phase.caseOpen ? 'Open' : 'Closed'}"/>

                                            </p:column>

                                            <p:column headerText="Name"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{cse.caseName}"/>

                                            </p:column>

                                            <p:column headerText="Manager"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{!(empty cse.caseManager) ? cse.caseManager.human.name:'No manager '}"/>

                                            </p:column>
                                            <p:column headerText="ID"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{cse.caseID}"/>

                                            </p:column>

                                            <p:column headerText="Options"
                                                      styleClass="centeredColumnContent">

                                                <p:commandButton    id="prop-person-viewcase-button"
                                                                    ajax="false"
                                                                    styleClass="noFill button-size-small"
                                                                    action="#{propertyProfileBB.onViewCaseButtonChange(cse)}"
                                                                    icon="fa fa-folder-open-o"
                                                                    value="View"
                                                                    />

                                            </p:column>
                                        </p:dataTable>
                                    </h:form>
                                </p:panel>

                                <p:panel    id="prop-periods-panel"
                                            toggleable="true"
                                            widgetVar="prop-periods-list-panel-var"
                                            collapsed="false"
                                            header="Occupancy periods">

                                    <h:form id="prop-periods-form">

                                        <p:dataTable id="prop-periods-table"
                                                     var="period"
                                                     value="#{propertyProfileBB.currentProperty.completePeriodList}"
                                                     tableStyleClass="primeDataTable"
                                                     rowKey="#{period.periodID}"
                                                     >
                                            <p:column width="10%" 
                                                      headerText="Exp.">
                                                <p:rowToggler/>
                                            </p:column>

                                            <p:column width="8%">
                                                <f:facet name="header">
                                                    <h:outputText value="Period ID"/>
                                                </f:facet>
                                                <h:outputText value="#{period.periodID}" />
                                            </p:column>
                                            <p:column width="8%">
                                                <f:facet name="header">
                                                    <h:outputText value="Unit ID"/>
                                                </f:facet>
                                                <h:outputText value="#{period.propertyUnitID}" />
                                            </p:column>
                                            <p:column width="15%">
                                                <f:facet name="header">
                                                    <h:outputText value="Type"/>
                                                </f:facet>
                                                <h:outputText value="#{period.type.title}" />
                                            </p:column>


                                            <p:column width="15%">
                                                <f:facet name="header">
                                                    <h:outputText value="Dates"/>
                                                </f:facet>
                                                <h:outputText value="Start Date: " 
                                                              styleClass="ui-label-inline" />

                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(period.startDate)}" 
                                                              styleClass="data-text"/>

                                                <p:spacer height="3px" />

                                                <h:outputText value="End Date: " 
                                                              styleClass="ui-label-inline" />

                                                <h:outputText value="#{propertyProfileBB.getPrettyDate(period.endDate)}" 
                                                              styleClass="data-text"/>
                                            </p:column>

                                            <p:column width="15%">
                                                <f:facet name="header">
                                                    <h:outputText value="Actions"/>
                                                </f:facet>
                                                <p:commandButton       id="button-occperiodtable-exploreperiod"
                                                                       value="explore occ period"  
                                                                       ajax="false" 
                                                                       action="#{propertyProfileBB.exploreOccPeriod(period)}"
                                                                       rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                                                       icon="fa fa-binoculars"/>
                                            </p:column>
                                        </p:dataTable>
                                    </h:form>

                                </p:panel>

                                <ui:include src="compositions/unitTools.xhtml" />

                                <p:panel id="prop-blobs-panel"
                                         toggleable="true"
                                         collapsed="false"
                                         header="Files and Photos"
                                         rendered="true"
                                         >

                                    <h:form id="prop-blobs-form">

                                        <p:commandButton    id="prop-blob-add-button"
                                                            ajax="true"
                                                            styleClass="noFill button-size-small"
                                                            actionListener="#{propertyProfileBB.onBlobAddButtonChange}"
                                                            
                                                            value="Add Photos or Documents"
                                                            icon="fa fa-upload"
                                                            />

                                        <p:spacer height="5px" />

                                        <p:dataTable
                                            id="prop-blobs-table"
                                            var="blob"
                                            value="#{propertyProfileBB.currentProperty.blobList}"
                                            rowKey="#{blob.bytesID}"
                                            tableStyleClass="primeDataTable"
                                            resizableColumns="true"
                                            draggableRows="false" tabindex="6">

                                            <p:column width="15%">
                                                <f:facet name="header">
                                                    <h:outputText value="File Type"/>
                                                </f:facet>
                                                <h:outputText value="#{blob.type.title}"/>
                                                <!-- type icon here -->
                                            </p:column>

                                            <p:column width="15%">
                                                <f:facet name="header">
                                                    <h:outputText value="IDs"/>
                                                </f:facet>
                                                <h:outputText value="linkID: #{blob.photoDocID}"/>
                                                <br/>
                                                <h:outputText value="bytesID: #{blob.bytesID}"/>

                                            </p:column>

                                            <p:column width="45%">
                                                <f:facet name="header">
                                                    <h:outputText value="Info"/>
                                                </f:facet>
                                                <div class="rowExpansion">
                                                    <h:outputText value="title: #{blob.title}"/>
                                                    <br/>
                                                    <h:outputText value="descr: #{blob.description}"/>
                                                    <br/>
                                                    <h:outputText value="filename: #{blob.filename}"/>
                                                    <br/>
                                                    <h:outputText value="created: #{propertyProfileBB.getPrettyDateNoTime(blob.createdTS)}"/>
                                                </div>
                                            </p:column>


                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Actions"/>
                                                </f:facet>
                                                <p:commandButton 
                                                    value="View in tab" 
                                                    ajax="false"
                                                    icon="fa fa-eye" 
                                                    styleClass="ui-button-outlined">
                                                    <p:fileDownload value="#{blobRetrieveBB.retrieveBlob(blob)}"
                                                                    contentDisposition="inline"
                                                                    />
                                                </p:commandButton>
                                                <br/>
                                                <p:commandButton 
                                                    value="Download" 
                                                    ajax="false"
                                                    icon="fa fa-arrow-down" 
                                                    styleClass="ui-button-outlined">
                                                    <p:fileDownload value="#{blobRetrieveBB.retrieveBlob(blob)}"
                                                                    />
                                                </p:commandButton>
                                                <br/>
                                                <div class="restrict-main-contents-io-link link-button">

                                                    <p:commandLink      id="blob-update-button"
                                                                        ajax="true"
                                                                        styleClass="noFill button-size-small"
                                                                        action="#{propertyProfileBB.onBlobSelectButtonChange(blob)}"
                                                                        value="edit"
                                                                       
                                                                        />
                                                </div>


                                                <h:outputText value="&nbsp;&nbsp;|" />
                                                <div class="restrict-main-contents-io-link link-button">

                                                    <p:commandLink      id="blob-remove-button"
                                                                        ajax="true"
                                                                        styleClass="noFill button-size-small"
                                                                        action="#{propertyProfileBB.onBlobRemoveInitButtonChange(blob)}"
                                                                        value="remove"
                                                                      
                                                                        />
                                                </div>
                                            </p:column>
                                        </p:dataTable>
                                    </h:form>
                                </p:panel>

                                <p:panel    id="prop-events-panel"
                                            toggleable="true"
                                            widgetVar="prop-events-panel-var"
                                            collapsed="false"
                                            header="Events"
                                            rendered="true">

                                    <h:form id="prop-events-panel-form">


                                        <p:selectOneMenu style="width: 300px;" 
                                                         id="prop-viewoptionsevents-solb" 
                                                         value="#{propertyProfileBB.eventViewOptionSelected}" 
                                                         tabindex="10">

                                            <p:ajax update="prop-events-datatable"                                                           
                                                    immediate="true"/>

                                            <f:selectItems  id="prop-events-selitems" 
                                                            value="#{propertyProfileBB.eventViewOptions}" 
                                                            var="evo" 
                                                            itemValue="#{evo}" 
                                                            itemLabel="#{evo.label}"/>
                                        </p:selectOneMenu>

                                        <p:spacer height="5px" />

                                        <p:dataTable id="prop-events-datatable"
                                                     var="event"
                                                     value="#{propertyProfileBB.currentProperty.completeEventList}"
                                                     tableStyleClass="primeDataTable"
                                                     rowKey="#{event.eventID}"
                                                     >

                                            <p:column headerText="ID"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{event.eventID}"/>

                                            </p:column>

                                            <p:column headerText="Category"
                                                      styleClass="centeredColumnContent">
                                                <h:outputText value="#{event.category.eventCategoryTitle}" />


                                            </p:column>

                                            <p:column headerText="Description"
                                                      styleClass="centeredColumnContent">

                                                <h:outputText value="#{event.description}"/>

                                            </p:column>
                                            <p:column headerText="Options"
                                                      styleClass="centeredColumnContent">

                                                <p:commandButton    id="prop-events-open-button"
                                                                    ajax="false"
                                                                    styleClass="noFill button-size-small"
                                                                    action="#{propertyProfileBB.onViewEventButtonChange(event)}"
                                                                    value="View Event"
                                                                    icon="fa fa-folder-open-o"
                                                                    />
                                            </p:column>
                                        </p:dataTable>
                                    </h:form>
                                </p:panel>

                            </div>
                        </div>
                    </div>




                    <p:dialog id="cecase-add-dialog"
                              modal="true"
                              height="500" 
                              width="600"
                              widgetVar="cecase-add-dialog-var"
                              closable="true"
                              closeOnEscape="true"
                              responsive="true"
                              resizable="true"
                              dynamic="true"
                              header="Create code enforcement case at #{propertyProfileBB.currentProperty.address.addressPretty1Line}, Parcel ID: #{propertyProfileBB.currentProperty.countyParcelID}"
                              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                              >
                     
                        <h:form id="cecase-add-form">
                            
                            <div class="p-grid">
                                <div class="p-col-4">
                                    <h:outputLabel value="Case Name" 
                                                   for="caseNameIT"/>
                                </div>
                                <div class="p-col-8">
                                    <p:inputText    id="caseNameIT" 
                                                    value="#{propertyProfileBB.currentCECase.caseName}" 
                                                    style="width: 100%;" 
                                                    tabindex="1" 
                                                    required="false" />
                                </div>
                                
                                <div class="p-col-4">
                                    <h:outputLabel value="Case Opening Date" 
                                                   for="formOpenDateCal"/>
                                </div>
                                <div class="p-col-8">
                                    <p:datePicker       value="#{propertyProfileBB.currentCECase.originationDate}" 
                                                        id="cecase-add-origdate-picker"
                                                        showButtonBar="true"
                                                        monthNavigator="true"
                                                        timeInput="true"
                                                        yearNavigator="true"
                                                        mask="false"
                                                        tabindex="16" >
                                     
                                    </p:datePicker>
                                </div>
                                <div class="p-col-4">
                                    <h:outputLabel value="Case manager" />
                                </div>
                                <div class="p-col-8">
                                    
                                    <p:selectOneMenu rendered="true"
                                                     value="#{propertyProfileBB.currentCECase.caseManager}"
                                                     converter="userConverter">
                                        <f:selectItem itemLabel="select a case manager"
                                                          noSelectionOption="true" 
                                                          itemDisabled="true"/>
                                        <f:selectItems value="#{systemServicesBB.bbSessionMuni.swornOfficerList}" 
                                                       var="user"
                                                       itemLabel="#{user.human.name} (#{user.username})"
                                                       itemValue="#{user}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="p-col-4">
                                    <h:outputLabel value="Origination category" 
                                                   for="cecase-add-origevent-som"/>
                                </div>
                                <div class="p-col-8">
                                     <h:selectOneMenu id="cecase-add-origevent-som"
                                                      value="#{propertyProfileBB.ceCaseOriginationEventSelected}"
                                                      required="true">

                                            <f:converter converterId="eventCategoryConverter"/>
                                            <f:selectItem itemLabel="select an event category"
                                                          noSelectionOption="true" 
                                                          itemDisabled="true"/>
                                            <f:selectItems id="cecase-add-origevent-selectitems"
                                                           value="#{propertyProfileBB.ceCaseOriginiationEventCandidateList}"
                                                           var="ec" 
                                                           itemValue="#{ec}" 
                                                           itemLabel="#{ec.eventCategoryTitle}"/>
                                        </h:selectOneMenu>
                                </div>
                                
                                <div class="p-col-4">
                                    <h:outputLabel value="Associated with unit?" />
                                </div>
                                <div class="p-col-8">
                                    
                                    <p:inputSwitch value="#{propertyProfileBB.ceCaseUnitAssociated}"
                                                   onLabel="Yes"
                                                   offLabel="No">
                                        <p:ajax update="cecase-unit-som" />
                                    </p:inputSwitch>
                                    
                                     <h:selectOneMenu id="cecase-unit-som"
                                                      value="#{propertyProfileBB.ceCaseUnitAssociation}"
                                                      required="false"
                                                      disabled="#{!propertyProfileBB.ceCaseUnitAssociated}">

                                            <f:converter converterId="propertyUnitConverter"/>
                                            <f:selectItem itemLabel="select a unit on current property"
                                                          noSelectionOption="true" 
                                                          itemDisabled="true"/>
                                            <f:selectItems id="cecase-unit-selectitems"
                                                           value="#{propertyProfileBB.currentProperty.unitList}"
                                                           var="pu" 
                                                           itemValue="#{pu}" 
                                                           itemLabel="#{pu.unitNumber} (ID:#{pu.unitID})"/>
                                        </h:selectOneMenu>
                                </div>
                                
                                <div class="p-col-4">
                                    <h:outputLabel value="Case opening notes" 
                                                   for="cecase-add-notes"/>
                                </div>
                                <div class="p-col-8">
                                    <p:inputTextarea    id="cecase-add-notes"
                                                        value="#{propertyProfileBB.currentCECase.notes}"
                                                        rows="5"
                                                        cols="30" />
                                    <p:spacer height="3px" />
                                    
                                    <p style="font-style: italic">Your name and the date will be automatically included in the note.</p>
                                </div>
                            </div>

                            <p:spacer height="5px" />
                            
                            <p:commandButton ajax="false" 
                                             tabindex="5" 
                                             icon="fa fa-archive"
                                             value="Open Code Enforcement Case" 
                                             action="#{propertyProfileBB.onAddNewCaseCommitButtonChange}" />
                            
                        </h:form>
                    </p:dialog>
                    

                    <p:dialog id="prop-remove-dialog"
                              modal="true"
                              height="300" 
                              width="550"
                              widgetVar="prop-remove-dialog-var"
                              closable="true"
                              header="Remove property #{propertySaddressString.currentProperty.address}"
                              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasEnfOfficialPermissions}"
                              >

                        <h:form id="propinfo-remove-form">

                            <p>Caution: This action is like 'delete'; we have to dig the record back out by
                                hand if you goof.</p>
                            <p:commandButton icon="fa fa-trash"
                                             ajax="false"
                                             action="#{propertyProfileBB.onRemoveButtonChange}"
                                             value="Permanently remove property ID:#{propertyProfileBB.currentProperty.propertyID}"
                                             />

                        </h:form>
                    </p:dialog>




                    <p:dialog   id="propinfo-notes-dialog"
                                height="300" width="750"
                                widgetVar="propinfo-notes-dialog-var"
                                closable="true"
                                header="Note Builder"
                                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                >

                        <h:form id="propinfo-note-create-form">

                            <h:messages id="propinfo-dialog-note-messages"
                                        globalOnly="true" showDetail="true" showSummary="true"
                                        warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError">
                            </h:messages>

                            <h:panelGrid columns="1"
                                         columnClasses="gridTd, gridTd">

                                <h:panelGroup>
                                    <h:outputText styleClass="ui-label" value="Note text: "/>
                                    <p:textEditor   id="propinfo-notes-editor"
                                                    value="#{propertyProfileBB.formNoteText}"
                                                    secure="false"
                                                    required="false"
                                                    height="200"/>


                                    <p:spacer height="5px" />
                                    <p:commandButton    id="propinfo-updatemetadata-button-cancel"
                                                        ajax="true"  tabindex="27"
                                                        value="Cancel"
                                                        icon="fa fa-stop"
                                                        immediate="true"
                                                        onclick="PF('propinfo-notes-dialog-var').hide()"
                                                        />

                                    <p:commandButton   id="propinfo-dialog-notes-button-addnote"
                                                       ajax="true" 
                                                       actionListener="#{propertyProfileBB.onNoteCommitButtonChange}"
                                                       oncomplete="PF('propinfo-notes-dialog-var').hide()"
                                                       rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"                                                                               
                                                       value="Attach Note"  
                                                       styleClass="inline-button"
                                                       icon="fa fa-sticky-note-o"
                                                       update="propinfo-notes-form"/>
                                </h:panelGroup>
                            </h:panelGrid>
                        </h:form>
                    </p:dialog>



                </f:view>

                <script type="text/javascript">
                    $(function () {
                        $.extend(PF("datatable"), {
                            onKeyDown: function (e) {
                                var key = e.which,
                                        keyCode = $.ui.keyCode;
                                if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                    e.preventDefault();
                                }
                            },
                            onKeyUp: function (e, rowIndex) {
                                var key = e.which,
                                        keyCode = $.ui.keyCode;
                                //.ui-row-editor-check .ui-icon-check .ui-c
                                if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                    this.tbody
                                            .find('.ui-row-editor .ui-icon-check')
                                            .eq(rowIndex)
                                            .click();
                                }
                                if (key === keyCode.ESCAPE) {
                                    this.tbody
                                            .find('.ui-row-editor .ui-icon-close')
                                            .eq(rowIndex)
                                            .click();
                                }
                            }
                        });
                    });
                </script>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

