<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link rel="stylesheet" type="text/css" href="css/style.css"></link>
        <title>Property Info</title>
    </h:head>
    <h:body>
        <ui:composition template="/restricted/navContainer_restricted.xhtml">
            <ui:define name="content">
                <f:view id="prop-info-view">

                    <p:outputPanel id="body-panel">

                        <h:form id="prop-info-header-form">
                            <h1> <h:outputText id="header-ot" styleClass="dataText" value="#{propertyProfileBB.currentProperty.address}" />
                                <h:outputText value=" | " />
                                <h:outputText value="#{propertyProfileBB.currentProperty.muni.muniName}" />
                                <h:outputText value=" | " />
                                <h:outputText id="header-lob-ot" value="Lot-block: #{propertyProfileBB.currentProperty.parID}"/>  
                                <h:outputText value=" | " />
                                <h:outputText id="header-propid-ot" value="ID: #{propertyProfileBB.currentProperty.propertyID}"/>  
                            </h1>
                        </h:form>

                        <h:form id="form-messages-global">
                            <p:messages id="messages-global" globalOnly="true" showDetail="true" showSummary="true" />
                        </h:form>

                        <div class="mainContainer">
                            <div class ="two-column-page-flex-container">
                                <div class="list-column" >


                                    <h:form id="mode-form">
                                        <p:selectOneButton style="  width: 100%; 
                                                           margin-top: 10px ; 
                                                           height: 20px;"
                                                           value="#{propertyProfileBB.currentMode}" 
                                                           unselectable="false"
                                                           >
                                            <f:selectItems value="#{propertyProfileBB.pageModes}"
                                                           var="pmo"
                                                           itemLabel="#{pmo.title}"
                                                           itemDisabled="#{!propertyProfileBB.currentPropertySelected and pmo.objectSelectRequiredToEnable}"/>
                                            <f:ajax render="@all"/>
                                        </p:selectOneButton> 
                                    </h:form>

                                    <!--LookUp Table-->
                                    <p:panel id="propinfo-panel-info"
                                             toggleable="true"
                                             collapsed="false"
                                             header="Property record"
                                             rendered="#{propertyProfileBB.getActiveViewMode() }"
                                             >

                                        <p:spacer height="10px"/>

                                        <h:form id="evruleconfig-panel-info-form">

                                            <div    id="propinfo-ot-muni-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-muni"
                                                                value="Municipality"/>

                                                <h:outputText   id="propinfo-ot-"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.muni.muniName} 
                                                                (ID:#{propertyProfileBB.currentProperty.muni.muniCode})" />
                                            </div>


                                            <div    id="propinfo-ot-parid-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-parid"
                                                                value="Parcel ID"/>

                                                <h:outputText   id="propinfo-ot-parid"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.parID}" />
                                            </div>


                                            <div    id="propinfo-ot-lab-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-lab"
                                                                value="Lot-Block"/>

                                                <h:outputText   id="propinfo-ot-lab"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.lotAndBlock}" />
                                            </div>


                                            <div    id='propinfo-ot-addr-div'
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-addr"
                                                                value="Address"/>

                                                <div class="data_field_value" >

                                                    <h:outputText   id="propinfo-ot-addr"
                                                                    value="#{propertyProfileBB.currentProperty.address}" />
                                                    <p:spacer height="0px" />
                                                    <h:outputText value="#{propertyProfileBB.currentProperty.address_city}" />
                                                    <h:outputText value=", " />
                                                    <h:outputText value="#{propertyProfileBB.currentProperty.address_state}" />
                                                    <h:outputText value=" " />
                                                    <h:outputText value="#{propertyProfileBB.currentProperty.address_zip}" />
                                                </div>

                                            </div>


                                            <div    id="propinfo-ot-usegroup-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-usegroup"
                                                                value="Use Group"/>

                                                <h:outputText   id="propinfo-ot-usegroup"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.useGroup}" />
                                            </div>


                                            <div    id="propinfo-ot-const-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-const"
                                                                value="Construction type"/>

                                                <h:outputText   id="propinfo-ot-const"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.constructionType}" />
                                            </div>


                                            <div    id="propinfo-ot-cond-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-cond"
                                                                value="Condition class"/>

                                                <h:outputText   id="propinfo-ot-cond"
                                                                styleClass="data_field_value" 
                                                                value="#{!(empty propertyProfileBB.currentProperty.condition) 
                                                                         ? propertyProfileBB.currentProperty.condition.title 
                                                                         : ''}" />
                                            </div>


                                            <div    id='propinfo-ot-count-div'
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-county"
                                                                value="County code"/>

                                                <h:outputText   id="propinfo-ot-county"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.countyCode}" />
                                            </div>


                                            <div    id='propinfo-ot-lastupdated-div'
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-lastupdated"
                                                                value="Last updated"/>

                                                <h:outputText   id="propinfo-ot-lastupdated"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.lastUpdatedTS)}
                                                                by #{!(empty propertyProfileBB.currentProperty.lastUpdatedBy) 
                                                                     ? propertyProfileBB.currentProperty.lastUpdatedBy.username : ''}" />
                                            </div>


                                            <div    id="propinfo-ot-lastupdated-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-source"
                                                                value="Source"/>

                                                <h:outputText   id="propinfo-ot-source"
                                                                styleClass="data_field_value" 
                                                                value="#{!(empty propertyProfileBB.currentProperty.bobSource) 
                                                                         ? propertyProfileBB.currentProperty.bobSource.title : ''}" />
                                            </div>


                                            <div    id="propinfo-ot-location"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-location"
                                                                value="Location"/>

                                                <h:outputText   id="propinfo-ot-location"
                                                                styleClass="data_field_value" 
                                                                value="#{!(empty propertyProfileBB.currentProperty)
                                                                         ? propertyProfileBB.currentProperty.locationDescriptor.locationDescription : ''}" />
                                            </div>

                                            <div    id="propinfo-ot-abandonedstart-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-abandonedstart"
                                                                value="Abandonment"/>
                                                <div class="data_field_value">
                                                    <h:outputText   id="propinfo-ot-abandonedstart"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.abandonedDateStart)}" />
                                                    <h:outputText   id="propinfo-ot-abandonedlink"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.abandonedDateStop) ? ' to ' : ' to present' }" />
                                                    <h:outputText   id="propinfo-ot-abandonedstop"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.abandonedDateStop)}" />
                                                    <h:outputText   id="propinfo-ot-abandoneduser"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.abandonedBy) ? propertyProfileBB.currentProperty.abandonedBy.username : ''}" />
                                                </div>
                                            </div>
                                            <div    id="propinfo-ot-vacantstart-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-vacantstart"
                                                                value="Vacant"/>
                                                <div class="data_field_value">
                                                    <h:outputText   id="propinfo-ot-vacantstart"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.vacantDateStart)}" />
                                                    <h:outputText   id="propinfo-ot-vacantlink"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.vacantDateStop) ? ' to ' : ' to present' }" />
                                                    <h:outputText   id="propinfo-ot-vacantstop"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.vacantDateStop)}" />
                                                    <h:outputText   id="propinfo-ot-vacantby"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.vacantBy) ? propertyProfileBB.currentProperty.vacantBy.username : ''}" />
                                                </div>
                                            </div>
                                            <div    id="propinfo-ot-vacant-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-unfitstart"
                                                                value="Unfit for occupancy"/>
                                                <div class="data_field_value">
                                                    <h:outputText   id="propinfo-ot-unfitstart"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.unfitDateStart)}" />
                                                    <h:outputText   id="propinfo-ot-unfitlink"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.unfitDateStop) ? ' to ' : ' to present' }" />
                                                    <h:outputText   id="propinfo-ot-unfitstop"
                                                                    value="#{propertyProfileBB.getPrettyDateNoTime(propertyProfileBB.currentProperty.unfitDateStop)}" />
                                                    <h:outputText   id="propinfo-ot-unfituser"
                                                                    value="#{!(empty propertyProfileBB.currentProperty.unfitBy) ? propertyProfileBB.currentProperty.unfitBy.username : ''}" />
                                                </div>
                                            </div>


                                            <div    id="propinfo-ot-landbankpropspect-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-lbprospect"
                                                                value="Land bank prospect"/>

                                                <h:outputText   id="propinfo-ot-lbprospect"
                                                                styleClass="data_field_value" 
                                                                value="#{!(empty propertyProfileBB.currentProperty.landBankProspect) 
                                                                         ? propertyProfileBB.currentProperty.landBankProspect.title : ' '}" />
                                            </div>

                                            <div    id="propinfo-ot-landbankheld-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-landbank"
                                                                value="Land bank held"/>

                                                <h:outputText   id="propinfo-ot-landbank"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.landBankHeld}" />
                                            </div>

                                            <div    id="propinfo-ot-nonaddressable-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-nonaddressable"
                                                                value="Nonaddressable"/>

                                                <h:outputText   id="propinfo-ot-nonaddressable"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.nonAddressable}" />
                                            </div>


                                            <div    id="propinf-ot-active-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-active"
                                                                value="Active"/>

                                                <h:outputText   id="propinfo-ot-active"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.active}" />
                                            </div>


                                            <div    id="propinfo-ot-creationts-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-creationts"
                                                                value="Created"/>

                                                <h:outputText   id="propinfo-ot-creationts"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.getPrettyDate(propertyProfileBB.currentProperty.creationTS)}" />
                                            </div>


                                            <div    id="propinf-ot-notes-div"
                                                    class="ui-g-12 ui-md-6 ui-lg-3 data_field">
                                                <h:outputLabel  styleClass="data_field_label" 
                                                                for="propinfo-ot-notes"
                                                                value="Notes"/>

                                                <h:outputText   id="propinfo-ot-notes"
                                                                styleClass="data_field_value" 
                                                                value="#{propertyProfileBB.currentProperty.notes}" />
                                            </div>

                                        </h:form>

                                    </p:panel>


                                    <!--Insert Table-->
                                    <p:panel id="propinfo-panel-addupdate"
                                             toggleable="true"
                                             collapsed="false"
                                             header="Create and update property"
                                             rendered="#{propertyProfileBB.getActiveInsertUpdateMode() }"
                                             >

                                        <h:form id="muniManage-form-insert">
                                            
                                            
                                                <p:commandButton    id="prop-add-discard-button-1"
                                                                    icon="fa fa-edit"
                                                                    ajax="true"
                                                                    action="#{propertyProfileBB.onDiscardNewPropertyDataButtonChange}"
                                                                    value="UPDATE"
                                                                    disabled="#{(empty propertyProfileBB.currentProperty) or
                                                                                (propertyProfileBB.currentProperty.propertyID == 0)}"
                                                                    />

                                            <div    id="prop-add-container-div"
                                                    class="ui-g data-container">

                                                <div    id="prop-add-address-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">
                                                    <p:outputLabel value="Street Address"/>
                                                    <p:spacer width="3px"/>
                                                    <p:inputText    id="prop-add-address-it"
                                                                    value="#{propertyProfileBB.currentProperty.address}"
                                                                    />
                                                </div>

                                                <div    id="prop-add-cit-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">
                                                    <p:outputLabel      id="prop-add-cit-ol"
                                                                        value="City"
                                                                        for="prop-add-cit-it"
                                                                        styleClass="data_field_label"/>

                                                    <p:inputText    id="prop-add-cit-it"
                                                                    value="#{propertyProfileBB.currentProperty.address_city}"
                                                                    />

                                                </div>

                                                <div    id="prop-add-zip-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Zip Code"
                                                                   for="prop-add-zip-ol"
                                                                   />

                                                    <p:inputText    id="prop-add-zip-it"
                                                                    value="#{propertyProfileBB.currentProperty.address_zip}"
                                                                    />
                                                </div>

                                                <div    id="prop-add-muni-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel  value="Municipality"
                                                                    for="prop-add-muni-som"/>

                                                    <h:selectOneMenu id="propinfoedit-muni-som"
                                                                     value="#{propertyProfileBB.currentProperty.muni}" style="width:175px;height:25px">
                                                        <f:converter converterId="muniConverter"/>
                                                        <f:selectItems id="propinfoedit-muninamelist" 
                                                                       value="#{sessionBean.sessUser.authMuniList}"
                                                                       var="m" itemValue="#{m}" itemLabel="#{m.muniName}"/>

                                                    </h:selectOneMenu>
                                                </div>

                                                <div    id="prop-add-state-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="State"
                                                                   for="prop-add-state-ol"
                                                                   />

                                                    <p:inputText    id="prop-add-state-it"
                                                                    value="#{propertyProfileBB.currentProperty.address_state}"
                                                                    />

                                                </div>

                                                <div    id="prop-add-lab-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel  value="Lot and Block"
                                                                    for="prop-add-lab-it"/>

                                                    <p:inputText    id="prop-add-lab-it"
                                                                    value="#{propertyProfileBB.currentProperty.lotAndBlock}"
                                                                    />

                                                </div>

                                                <div    id="prop-add-parid-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="ParcelID"
                                                                   for="prop-add-parid-it"/>

                                                    <p:inputText    id="prop-add-parid-it"
                                                                    value="#{propertyProfileBB.currentProperty.parID}"/>
                                                </div>

                                                <div    id="prop-add-unfit-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Unfit Start Date" 
                                                                   for="prop-add-unfit-start-cal"/>

                                                    <p:calendar id="prop-add-unfit-start-cal"
                                                                value="#{propertyProfileBB.currentProperty.unfitDateUtilStart}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                maxdate="#{propertyProfileBB.currentProperty.unfitDateUtilStop}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-end-unfit"/>
                                                    </p:calendar>
                                                </div>

                                                <div    id="prop-add-unfit-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Unfit End Date" 
                                                                   for="prop-add-unfit-end-cal"/>
                                                    <p:spacer height="3px"/>
                                                    <p:calendar id="prop-add-unfit-end-cal"
                                                                value="#{propertyProfileBB.currentProperty.unfitDateUtilStop}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                mindate="#{propertyProfileBB.currentProperty.unfitDateUtilStart}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-end-unfit"/>
                                                    </p:calendar>

                                                </div>

                                                <div    id="prop-add-vacant-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel  value="Vacant Start Date" 
                                                                    for="prop-add-vacant-start-cal"/>

                                                    <p:calendar id="prop-add-vacant-start-cal"
                                                                value="#{propertyProfileBB.currentProperty.vacantDateUtilStart}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                maxdate="#{propertyProfileBB.currentProperty.vacantDateUtilStop}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-stop-vacant"/>
                                                    </p:calendar>
                                                </div>

                                                <div    id="prop-add-vacant-stop-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Vacant Stop Date" 
                                                                   for="prop-add-vacant-stop-cal"/>

                                                    <p:calendar id="prop-add-vacant-stop-cal"
                                                                value="#{propertyProfileBB.currentProperty.vacantDateUtilStop}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                mindate="#{propertyProfileBB.currentProperty.vacantDateUtilStart}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-start-vacant"/>
                                                    </p:calendar>
                                                </div>

                                                <div    id="prop-add-abandoned-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Abandoned Start Date" 
                                                                   for="prop-add-abandoned-start-cal"/>

                                                    <p:calendar id="prop-add-abandoned-start-cal"
                                                                value="#{propertyProfileBB.currentProperty.abandonedDateUtilStart}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                maxdate="#{propertyProfileBB.currentProperty.abandonedDateUtilStop}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-stop-abandoned"/>
                                                    </p:calendar>
                                                </div>

                                                <div    id="prop-add-abandoned-stop-div"
                                                        class="ui-g-12 ui-md-12 ui-lg-12 data_field">

                                                    <p:outputLabel value="Abandoned Stop Date" 
                                                                   for="prop-add-abandoned-stop-cal"/>

                                                    <p:calendar id="prop-add-abandoned-stop-cal"
                                                                value="#{propertyProfileBB.currentProperty.abandonedDateUtilStop}"
                                                                mode="popup"
                                                                pattern="EEE, dd MMM, yyyy HH:mm:ss"
                                                                navigator="true" 
                                                                tabindex="16" 
                                                                timeInput="true" 
                                                                showHour="true" showMinute="false" showSecond="false" showMillisec="false"
                                                                showButtonPanel="true" 
                                                                showTodayButton="true"
                                                                mindate="#{propertyProfileBB.currentProperty.abandonedDateUtilStart}">
                                                        <p:ajax event="dateSelect" update="propinfoedit-stop-abandoned"/>
                                                    </p:calendar>
                                                </div>


                                                <!--Insert Button only activates with a new ERA-->
                                                <p:commandButton    id="prop-add-addnew-commit-button"
                                                                    icon="fa fa-edit"
                                                                    ajax="false"
                                                                    action="#{propertyProfileBB.onInsertButtonChange()}"
                                                                    value="INSERT"
                                                                    disabled="#{(empty propertyProfileBB.currentProperty) or
                                                                                (propertyProfileBB.currentProperty.propertyID != 0)}"
                                                                    />

                                                <p:commandButton    id="prop-add-update-commit-button"
                                                                    icon="fa fa-edit"
                                                                    ajax="false"
                                                                    action="#{propertyProfileBB.onUpdateButtonChange()}"
                                                                    value="UPDATE"
                                                                    disabled="#{(empty propertyProfileBB.currentProperty) or
                                                                                (propertyProfileBB.currentProperty.propertyID == 0)}"
                                                                    />

                                                <p:commandButton    id="prop-add-discard-button-2"
                                                                    icon="fa fa-edit"
                                                                    ajax="true"
                                                                    action="#{propertyProfileBB.onDiscardNewPropertyDataButtonChange}"
                                                                    value="UPDATE"
                                                                    disabled="#{(empty propertyProfileBB.currentProperty) or
                                                                                (propertyProfileBB.currentProperty.propertyID == 0)}"
                                                                    />
                                            </div>
                                        </h:form>
                                    </p:panel>


                                    <!--Remove Table-->
                                    <p:panel id="prop-remove-panel"
                                             toggleable="true"
                                             collapsed="false"
                                             header="Remove property"
                                             rendered="#{propertyProfileBB.getActiveRemoveMode() }"
                                             >


                                        <h:form id="propinfo-remove-form">

                                            <p>Caution: This action is like 'delete'; we have to dig the record back out by
                                                hand if you goof.</p>
                                            <!--Remove Button-->
                                            <p:commandButton icon="fa fa-stop"
                                                             ajax="false"
                                                             action="#{propertyProfileBB.onRemoveButtonChange()}"
                                                             value="Permanently remove property ID:#{propertyProfileBB.currentProperty.propertyID}"
                                                             />

                                        </h:form>

                                    </p:panel>





                                </div>

                                <div class ="object-column">
                                    <p:outputPanel id = "prop-lists-outpanel" >

                                        <p:panel    id="prop-extinfo-panel"
                                                    toggleable="true"
                                                    widgetVar="prop-info-var"
                                                    collapsed="false"
                                                    header="External Data Records">

                                            <h:form id="prop-extinfo-panel-form">
                                                <p:dataTable id="muniTable"
                                                             var="muni"
                                                             value="#{municipalityManageSampleBB.currentMuniList}"
                                                             tableStyleClass="primeDataTable"
                                                             >

                                                    <p:column headerText="Code"
                                                              styleClass="centeredColumnContent">

                                                        <h:outputText value="#{muni.muniCode}"/>

                                                    </p:column>

                                                    <p:column headerText="Name"
                                                              styleClass="centeredColumnContent">

                                                        <h:outputText value="#{muni.muniName}"/>

                                                    </p:column>

                                                    <p:column headerText="Option"
                                                              styleClass="centeredColumnContent"
                                                              style="width: 80px"
                                                              >

                                                        <p:selectBooleanButton onLabel="Deselect" 
                                                                               offLabel="Select"
                                                                               styleClass="selectButton" 
                                                                               value="#{municipalityManageSampleBB.currentMuniSelected}"
                                                                               disabled="#{municipalityManageSampleBB.getSelectedButtonActive()}"
                                                                               >

                                                            <p:ajax update="
                                                                    form-messages-global"
                                                                    listener="#{municipalityManageSampleBB.onMuniSelectedButtonChange(muni.muniCode)}"/>

                                                        </p:selectBooleanButton>

                                                    </p:column>

                                                </p:dataTable>



                                            </h:form>
                                        </p:panel>
                                    </p:outputPanel>

                                </div>
                            </div>




                        </div>
                    </p:outputPanel>
                </f:view>

                <script type="text/javascript">
                    $(function () {
                        $.extend(PF("datatable"), {
                            onKeyDown: function (e) {
                                var key = e.which,
                                        keyCode = $.ui.keyCode;
                                if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                    e.preventDefault();
                                }
                            },
                            onKeyUp: function (e, rowIndex) {
                                var key = e.which,
                                        keyCode = $.ui.keyCode;
                                //.ui-row-editor-check .ui-icon-check .ui-c
                                if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                    this.tbody
                                            .find('.ui-row-editor .ui-icon-check')
                                            .eq(rowIndex)
                                            .click();
                                }
                                if (key === keyCode.ESCAPE) {
                                    this.tbody
                                            .find('.ui-row-editor .ui-icon-close')
                                            .eq(rowIndex)
                                            .click();
                                }
                            }
                        });
                    });
                </script>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

