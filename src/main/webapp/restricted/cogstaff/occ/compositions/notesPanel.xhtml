<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml">
    <p:panel id="occperiod-notes-panel"
             toggleable="true"
             widgetVar="occperiod-notes-panel-var"
             collapsed="false"
             header="Notes">

        <h:form id="occperiod-notes-form">
            <p:commandButton id="occperiod-notes-add-button"
                             rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                             value="Add New Note"
                             icon="fa fa-sticky-note-o"
                             actionListener="#{occPeriodSearchWorkflowBB.clearFormNoteText}"
                             oncomplete="PF('occperiod-note-dialog-var').show()"
                             update="occperiod-note-create-form"/>

            <p:spacer height="5px"/>
            <h:outputText id="occperiod-notes-ot"
                          escape="false"
                          value="#{occPeriodSearchWorkflowBB.currentOccPeriod.notes}"/>

        </h:form>
    </p:panel>

    <!-- Notes dialog -->
    <p:dialog id="occperiod-note-dialog"
              height="300" width="750"
              widgetVar="occperiod-note-dialog-var"
              closable="true"
              resizable="true"
              responsive="true"
              modal="true"
              header="Note Builder"
              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}">

        <h:form id="occperiod-note-create-form">

            <h:outputText styleClass="ui-label" value="Note text: (name and time automatically inserted) "/>
            <p:textEditor id="occperiod-note-editor"
                          value="#{occPeriodSearchWorkflowBB.formNoteText}"
                          required="false"
                          secure="false"
                          height="200"/>

            <p:spacer height="5px"/>

            <p:commandButton id="occperiod-note-button-cancel"
                             value="Cancel"
                             icon="fa fa-stop"
                             onclick="PF('occperiod-note-dialog-var').hide()"/>

            <p:commandButton id="occperiod-note-button-addnote"
                             rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                             actionListener="#{occPeriodSearchWorkflowBB.appendOccPeriodNotes}"
                             onclick="PF('occperiod-note-dialog-var').hide()"
                             update="occperiod-notes-form"
                             value="Attach Note"
                             styleClass="inline-button"
                             icon="fa fa-sticky-note-o"/>
        </h:form>
    </p:dialog>
</ui:composition>