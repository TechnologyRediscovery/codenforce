<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml">

    <h:form id="nov-growl-form">
        <p:growl id="nov-growl"
                 globalOnly="false" />
    </h:form>

    <ui:include src="/restricted/cogstaff/compositions/textBlockTools.xhtml" />

    <p:panel id="cecase-notices-panel"
             toggleable="true"
             collapsed="false"
             header="Letters (#{ceCaseBB.currentCase.noticeList.size()})"
             rendered="true"
             >
        <h:form id="cecase-notices-form">


            <p:commandButton    id="cecase-notices-add-button"
                                ajax="true"
                                styleClass="noFill button-size-small"
                                actionListener="#{noticeOfViolationBB.onStartNewNoticeButtonChange}"
                                value="New Letter"
                                oncomplete="PF('nov-template-choose-dialog').show()"
                                icon="fa fa-plus"
                                />

            <p:commandLink  id="manage-blocks-cl" 
                            ajax="true"
                            actionListener="#{textBlockBB.onManageBlocksInit}"
                            value="manage text block templates"
                            style="color:blue; font-weight: bold; margin-left: 10px;"
                            oncomplete="PF('nov-templatemanage-dialog-var').show();"
                            update="nov-template-select-form"
                            rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"/>

            <h:outputText value=" | " />

            <p:commandLink      id="nov-managetemplates-init-button"
                                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                style="color:blue; font-weight: bold; margin-left: 10px;"
                                value="manage Letter Types"
                                ajax="true"
                                actionListener="#{noticeOfViolationBB.onNOVTypeManageButtonClick}"
                                update="@form:@parent:novtype-list-form"
                                oncomplete="PF('novtype-list-dialog-var').show()"
                                />


            <p:spacer height="5px"/>

            <p:dataTable
                id="cecase-notices-table"
                var="nov"
                rowKey="#{nov.noticeID}"
                value="#{ceCaseBB.currentCase.noticeList}"
                tableStyleClass="primeDataTable"
                >

                <p:column width="15%"
                          sortBy="#{nov.novType.title}">
                    <f:facet name="header">
                        <h:outputText value="Type"/>
                    </f:facet>
                    <h:outputText value="#{nov.novType.title}"/>
                </p:column>

                <p:column width="20%">
                    <f:facet name="header">
                        <h:outputText value="Date of record"/>
                    </f:facet>
                    <h:outputText value="#{ceCaseBB.getPrettyDate(nov.dateOfRecord)}"/>
                </p:column>


                <p:column width="30%">
                    <f:facet name="header">
                        <h:outputText value="Status"/>
                    </f:facet>

                    <h:outputText value="#{empty nov.lockedAndqueuedTS ? 'Next step: Finalize notice' : ''}"/>

                    <h:outputText value="#{!(empty nov.lockedAndqueuedTS) ? 'Finalized: ' : ''}"/>
                    <h:outputText value="#{ceCaseBB.getPrettyDate(nov.lockedAndqueuedTS)}"/>

                    <p:spacer height="3px"/>

                    <h:outputText value="#{!(empty nov.sentTS) ? 'Sent: ' : ''}"/>
                    <h:outputText value="#{ceCaseBB.getPrettyDate(nov.sentTS)}"/>

                    <p:spacer height="3px"/>

                    <h:outputText value="#{!(empty nov.returnedTS) ? 'Returned: ' : ''}"/>
                    <h:outputText value="#{ceCaseBB.getPrettyDate(nov.returnedTS)}"/>

                    <p:spacer height="3px"/>

                    <div class="restrict-main-contents-io-link link-button">

                        <p:commandLink   id="nov-queuenotice-cb"
                                         ajax="true"
                                         actionListener="#{noticeOfViolationBB.lockNoticeAndQueueForMailing(nov)}"
                                         value="finalize and lock"
                                         styleClass="noFill"
                                         update="novstatus-dialog
                                         cecase-notices-form
                                         nov-growl-form"
                                         disabled="#{!(empty nov.lockedAndqueuedTS)}"/>

                    </div>

                    <h:outputText value=" | "
                                  escape="false"/>

                    <div class="restrict-main-contents-io-link link-button">


                        <p:commandLink   id="nov-mailednotice-init-cb"
                                         ajax="true"
                                         actionListener="#{noticeOfViolationBB.markNoticeOfViolationAsSentInit(nov)}"
                                         value="record mailing"
                                         styleClass="noFill"
                                         update="cecase-novfollowup-dialog
                                                cecase-novfollowup-form"
                                         oncomplete="PF('cecase-novfollowup-dialog-var').show()"
                                         disabled="#{!(empty nov.sentTS) or (empty nov.lockedAndqueuedTS) }"/>
                    </div>
                </p:column>

                <p:column width="30%">
                    <f:facet name="header">
                        <h:outputText value="Actions" />
                    </f:facet>
                    <div class="restrict-main-contents-io-link link-button">

                        <p:commandLink  ajax="false"
                                        value="#{!(empty nov.lockedAndqueuedTS) ? 'Print' : 'Preview draft'}"
                                        action="#{noticeOfViolationBB.printNotice(nov)}"
                                        target="_blank"/>
                    </div>
                    <p:spacer height="3px" />
                    <div class="restrict-main-contents-io-link link-button">

                        <p:commandLink      id="cecase-notices-view-button"
                                            ajax="true"
                                            value="details"
                                            actionListener="#{noticeOfViolationBB.onObjectViewButtonChange(nov)}"
                                            rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                            update="novstatus-dialog"
                                            oncomplete="PF('novstatus-dialog-var').show()"/>
                    </div>
                    <h:outputText value=" | " />
                    <div class="restrict-main-contents-io-link link-button">

                        <p:commandLink      id="cecase-notices-edit-button"
                                            ajax="true"
                                            value="edit"
                                            action="#{noticeOfViolationBB.onObjectViewButtonChange(nov)}"
                                            rendered="true"
                                            disabled="#{!(empty nov.lockedAndqueuedTS)}"
                                            update="novstatus-dialog"
                                            oncomplete="PF('nov-add-edit-dialog-var').show()"/>
                    </div>
                    <p:spacer height="3px" />
                    <h:outputText value="(Notice ID: #{nov.noticeID})"/>

                </p:column>
            </p:dataTable>
        </h:form>
    </p:panel>

    <p:dialog   id="novstatus-dialog"
                height="650" width="900"
                header="Letter ID #{noticeOfViolationBB.currentNotice.noticeID} Details"
                widgetVar="novstatus-dialog-var"
                closable="true"
                dynamic="true"
                modal="true"
                responsive="true"
                closeOnEscape="true"
                resizable="true"
                rendered="true"
                >

        <h:form id="nov-profile-form">

            <!-- Violation status; single line-->
            <div class="ui-g data_container_nested_restrict">

                <div class="ui-g-4 ui-md-4 ui-lg-4 restrict-data-field" >
                    <div class="p-grid">
                        <div class="p-col-12 restrict-data-field-label-vertical">
                            <h:outputText value="Type"/>
                        </div>
                        <div class="p-col-12 restrict-data-field-value-vertical">
                            <h:outputText   id="nov-type-ot"
                                            value="#{noticeOfViolationBB.currentNotice.novType.title} (ID:#{noticeOfViolationBB.currentNotice.novType.typeID})"/>
                            <p:spacer height="3px" />

                            <p:commandLink      id="nov-edittype-commandlink"
                                                value="change type" 
                                                ajax="true"
                                                actionListener="#{noticeOfViolationBB.onNOVTypeChangeInit}"
                                                style="color:blue; font-weight: bold;"
                                                rendered="true"
                                                disabled="#{!empty noticeOfViolationBB.currentNotice.lockedAndqueuedTS}"
                                                oncomplete="PF('nov-changetype-dialog-var').show();"
                                                update= "nov-changetype-dialog
                                                nov-changetype-form">
                            </p:commandLink> 


                        </div>
                    </div>    
                </div>
                <div class="ui-g-4 ui-md-4 ui-lg-4 restrict-data-field" >

                </div>
                <div class="ui-g-4 ui-md-4 ui-lg-4 restrict-data-field" >

                    <div class="restrict-data-field-label-inline" >
                        <p:outputLabel for="nov-addressee">
                            <h:outputText value="Adressee"/>
                        </p:outputLabel>
                    </div>

                    <div class="restrict-data-field-value-inline" >
                        <h:outputText   id="nov-addressee"
                                        value="#{noticeOfViolationBB.currentNotice.recipient.name}"/>
                        <p:spacer height="3px" />
                        <h:outputText value="#{noticeOfViolationBB.currentNotice.recipientMailingAddress.addressPretty2LineEscapeFalse}"
                                      escape="false" />
                    </div>
                </div>
            </div>

            <!-- DOR, qued date, sent date, returned date table-->
            <div class="ui-g data_container_nested_restrict">

                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-6 ui-lg-2 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value=" "/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" style="font-weight: 700;">
                        Date:
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" style="font-weight: 700;">
                        Details:
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" style="font-weight: 700;">
                        Action:
                    </div>

                </div>

                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-6 ui-lg-2 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value="Date of Record"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText id="nov-dor-ot"
                                      value="#{noticeOfViolationBB.getPrettyDate(noticeOfViolationBB.currentNotice.dateOfRecord)}" />
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-creator-ot0"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.creationBy) ? 'By ' : ''}"/>
                        <h:outputText   id="nov-creator-ot1"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.creationBy) ? noticeOfViolationBB.currentNotice.creationBy.human.name : ''}"/>
                    </div>
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText id="nov-dor-placeholder-ot"
                                      value=" " />
                    </div>

                </div>

                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-6 ui-lg-2 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value="Queued for Mailing"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-queued-ot"
                                        value="#{noticeOfViolationBB.getPrettyDate(noticeOfViolationBB.currentNotice.lockedAndqueuedTS)}"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-queuedby-ot0"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.lockedAndQueuedBy) ? 'By ' : ''}"/>
                        <h:outputText   id="nov-queuedby-ot1"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.lockedAndQueuedBy) ? noticeOfViolationBB.currentNotice.lockedAndQueuedBy.human.name : ''}"/>
                    </div>
                    <div class="restrict-data-field-value-vertical" >

                    </div>
                </div>

                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-3 ui-lg-3 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value="Sent"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-sent-ot"
                                        value="#{noticeOfViolationBB.getPrettyDate(noticeOfViolationBB.currentNotice.sentTS)}"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-sentby-ot0"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.sentBy) ? 'By ' : ''}"/>
                        <h:outputText   id="nov-sentby-ot1"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.sentBy) ? noticeOfViolationBB.currentNotice.sentBy.human.name: ''}"/>
                    </div>
                    <div class="restrict-data-field-value-vertical" >

                    </div>

                </div>
                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-3 ui-lg-3 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value="Returned"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-returned-ot"
                                        value="#{noticeOfViolationBB.getPrettyDate(noticeOfViolationBB.currentNotice.returnedTS)}"/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-returnedby-ot0"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.returnedBy) ? 'By ' : ''}"/>
                        <h:outputText   id="nov-returnedby-ot1"
                                        value="#{!(empty noticeOfViolationBB.currentNotice.returnedBy) ? noticeOfViolationBB.currentNotice.returnedBy.human.name : ''}"/>
                    </div>

                    <div class="restrict-data-field-value-vertical" >
                        <p:commandButton id="nov-returned-cb"
                                         ajax="true"
                                         actionListener="#{noticeOfViolationBB.markNoticeOfViolationAsReturned}"
                                         value="Mark letter as returned"
                                         styleClass="noFill"
                                         icon="fa fa-mail-reply"
                                         update="nov-profile-form
                                         nov-growl-form"
                                         disabled="#{(empty noticeOfViolationBB.currentNotice.sentTS) || !(empty noticeOfViolationBB.currentNotice.returnedTS)}"
                                         />
                    </div>

                </div>

                <!--NESTED DATA FIELD VERTICAL-->
                <div class="ui-g-3 ui-md-6 ui-lg-2 restrict-data-field-vertical">
                    <!--NESTED DATA LABEL VERTICAL -->
                    <div class="restrict-data-field-label-vertical" >
                        <h:outputLabel value=" "/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-placeholder-ot"
                                        value=" "/>
                    </div>
                    <!--NESTED DATA VALUE VERTICAL -->
                    <div class="restrict-data-field-value-vertical" >
                        <h:outputText   id="nov-placeholder2-ot"
                                        value=" "/>
                    </div>
                    <div class="restrict-data-field-value-vertical" >

                        <h:outputText   id="nov-placeholder3-ot"
                                        value=" "/>

                    </div>
                </div>
            </div>

            <h2>Letter Tools</h2>

            <div class="ui-g data_container_nested_restrict">

                <div class="ui-g-12 ui-md-6 ui-lg-6 restrict-data-field" >
                    <div class="restrict-main-contents-io-button red_button">

                        <p:commandButton id="nov-reset-cb"
                                         ajax="false"
                                         action="#{noticeOfViolationBB.resetNotice}"
                                         value="Reset mailing status"
                                         styleClass="noFill"
                                         icon="fa fa-window-close-o"
                                         disabled="false"
                                         rendered="#{systemServicesBB.bbSessionUser.keyCard.hasEnfOfficialPermissions}"
                                         />
                    </div>
                    <div class="restrict-main-contents-io-button red_button">
                        <p:commandButton
                            id="nov-remove-button"
                            icon="fa fa-trash"
                            ajax="false"
                            action="#{noticeOfViolationBB.deleteNoticeOfViolation}"
                            value="Remove letter of violation ID:#{noticeOfViolationBB.currentNotice.noticeID}"
                            />
                    </div>
                </div>
            </div>

            <h2>Letter Text</h2>
            <h:outputText id="nov-text-view-before"
                          value="#{noticeOfViolationBB.currentNotice.noticeTextBeforeViolations}"
                          escape="false" />

            <h:outputText value="[CODE VIOLATIONS WILL BE INSERTED HERE]" class="bold" />

            <h:outputText id="nov-text-view-after"
                          value="#{noticeOfViolationBB.currentNotice.noticeTextAfterViolations}"
                          escape="false" />

        </h:form>
    </p:dialog>

    <p:dialog     id="cecase-novfollowup-dialog"
                  header="Mark Letter ID #{noticeOfViolationBB.currentNotice.noticeID} as mailed"
                  widgetVar="cecase-novfollowup-dialog-var"
                  responsive="true"
                  resizable="true"
                  closeOnEscape="true"
                  closable="true"
                  width="400"
                  dynamic="true"
                  modal="true"
                  height="450">
        <h:form id="cecase-novfollowup-form">


            <h:outputText value="Based on this letter's type of #{noticeOfViolationBB.currentNotice.novType.title}, a follow up event will automatically be added to this case #{noticeOfViolationBB.currentNotice.novType.followUpWindowDays} days in the future." />
            
            <p:spacer height="5px" />


            <p:commandButton    id="cecase-novfollowup-cancel"
                                ajax="true"  tabindex="27"
                                value="Cancel"
                                icon="fa fa-stop"
                                immediate="true"
                                process="@none"
                                onclick="PF('cecase-novfollowup-dialog-var').hide()"
                                />

            <p:commandButton id="nov-mailednotice-cb"
                             ajax="true"
                             actionListener="#{noticeOfViolationBB.markNoticeOfViolationAsSent}"
                             oncomplete="PF('cecase-novfollowup-dialog-var').hide()"
                             value="Mark as mailed!"
                             styleClass="noFill"
                             icon="fa fa-send"
                             disabled="false"
                             update=" nov-profile-form
                             @form:@parent:cecase-notices-form
                             nov-growl-form
                             @form:@parent:events-panel
                             @form:@parent:events-form"
                             />

        </h:form>
    </p:dialog>

    <p:dialog   id="nov-changetype-dialog"
                height="300" width="750"
                widgetVar="nov-changetype-dialog-var"
                closable="true"
                resizable="true"
                closeOnEscape="true"
                dynamic="true"
                modal="true"
                header="Change of NOV type (ID:#{noticeOfViolationBB.currentNotice.noticeID})"
                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                >
        <h:form id="nov-changetype-form">

            <h:outputText value="The Current Letter type is: #{noticeOfViolationBB.currentNotice.novType.title} (ID:#{noticeOfViolationBB.currentNotice.novType.typeID})"
                          rendered="#{!empty noticeOfViolationBB.currentNotice.novType}" />

            <p:spacer height="5px" />

            <p:selectOneMenu 
                id="novtype-change-som" 
                tabindex="1"
                value="#{noticeOfViolationBB.selectedNOVType}"
                required="false"
                rendered="true">

                <f:selectItem itemLabel="select a letter type..." 
                              noSelectionOption="true" 
                              itemDisabled="true"/>
                <f:selectItems value="#{noticeOfViolationBB.novTypeList}" 
                               var="novt" 
                               itemLabel="#{novt.title} (ID:#{novt.typeID})"/>
                <f:converter converterId="novTypeConverter" />
            </p:selectOneMenu>


            <p:commandButton id="novtype-change-commit-button"
                             value="Save Change type"
                             icon="fa fa-save"
                             ajax="true"
                             disabled="false"
                             actionListener="#{noticeOfViolationBB.onNOVTypeChangeCommit}"
                             oncomplete="PF('novstatus-dialog-var').show(); PF('nov-changetype-dialog-var').hide();"
                             update="nov-growl-form
                             nov-profile-form
                             @form:@parent:cecase-notices-form"/>
        </h:form>

    </p:dialog>


    <p:dialog   id="nov-template-choose-dialog"
                height="300" width="1000"
                widgetVar="nov-template-choose-dialog"
                closable="true"
                resizable="true"
                closeOnEscape="true"
                dynamic="true"
                modal="true"
                header="Choose a Letter Type and Template"
                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                >

        <h:form id="nov-template-choose-form">

            <p:selectOneMenu 
                id="novtype-som" 
                tabindex="1"
                value="#{noticeOfViolationBB.currentNotice.novType}"
                required="false"
                rendered="true">

                <f:selectItem itemLabel="select a letter type..." 
                              noSelectionOption="true" 
                              itemDisabled="true"/>
                <f:selectItems value="#{noticeOfViolationBB.novTypeList}" 
                               var="novt" 
                               itemLabel="#{novt.title} (ID:#{novt.typeID}) [#{novt.muni.muniName}]"/>
                <f:converter converterId="novTypeConverter" />
                <p:ajax update="nov-templateblocks-add-table"
                        listener="#{noticeOfViolationBB.onNOVTypeChange()}"/>
            </p:selectOneMenu>

            <div class="p-grid">
                
                <div class="p-col-6">
                    <h:outputText value="Include all municipalities?"
                                  style="margin-right:8px;"/>
                    <p:selectBooleanCheckbox value="#{noticeOfViolationBB.showTextBlocksAllMuni}">
                         <p:ajax update="nov-templateblocks-add-table"
                                    listener="#{noticeOfViolationBB.onNOVTypeChange()}"/>
                    </p:selectBooleanCheckbox>
                </div>
                <div class="p-col-6">
                    <h:outputText value="Include all block categories"
                                  style="margin-right:8px;"/>
                    <p:selectBooleanCheckbox value="#{noticeOfViolationBB.showTextBlocksAllCategories}">
                         <p:ajax update="nov-templateblocks-add-table"
                                    listener="#{noticeOfViolationBB.onNOVTypeChange()}"/>
                    </p:selectBooleanCheckbox>

                </div>

            </div>
            
            <h4>Available templates for letters of selected type:</h4>
           
            
            <p:dataTable id="nov-templateblocks-add-table"
                         value="#{noticeOfViolationBB.blockList}"
                         var="template"
                         rowKey="#{template.blockID}"
                         tableStyleClass="primeDataTable"
                         resizableColumns="true"
                         draggableColumns="true"
                         rowExpandMode="multiple"
                         expandedRow="false"
                         widgetVar="textBlockTableWidgetVar"
                         >

                <p:column width="10%">
                    <f:facet name="header">
                        <h:outputText value="ID#" />
                    </f:facet>
                    <h:outputText value="#{template.blockID}"/>
                </p:column>

                <p:column   width="30%"
                            sortBy="#{template.textBlockName}">
                    <f:facet name="header">
                        <h:outputText value="Name"/>
                    </f:facet>
                    <h:outputText value="#{template.textBlockName}"/>
                </p:column>

                <p:column   width="25%"
                            sortBy="#{template.category}">
                    <f:facet name="header">
                        <h:outputText value="Category"/>
                    </f:facet>
                    <h:outputText value="#{template.category.title}"
                                  rendered="#{!empty template.category}"/>
                </p:column>

                <p:column   width="15%"
                            sortBy="#{template.category}">
                    <f:facet name="header">
                        <h:outputText value="Muni"/>
                    </f:facet>
                    <h:outputText value="#{template.muni.muniName}"
                                  rendered="#{!empty template.muni}"/>
                </p:column>

                <p:column width="20%">
                    <f:facet name="header">
                        <h:outputText value="Actions"/>
                    </f:facet>
                    <p:commandButton id="choosetemplate-cb"
                                     value="Create Draft"
                                     icon="fa fa-quote-left"
                                     ajax="true"
                                     disabled="false"
                                     actionListener="#{noticeOfViolationBB.onBuildNOVUsingTemplateBlock(template)}"
                                     oncomplete="PF('nov-add-edit-dialog-var').show(); PF('nov-template-choose-dialog').hide();"
                                     update="
                                     nov-add-edit-dialog
                                     nov-date-form
                                     chosen-recipient-form
                                     nov-preview-textbefore-form
                                     nov-violation-configuration-form
                                     nov-preview-textafter-form
                                     nov-submission-form"/>


                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>

    <p:dialog   id="nov-add-edit-dialog"
                height="600" width="1100"
                widgetVar="nov-add-edit-dialog-var"
                closable="true"
                dynamic="true"
                modal="true"
                responsive="true"
                resizable="true"
                closeOnEscape="true"
                header="#{noticeOfViolationBB.currentNotice.noticeID ==0 ? 'Create New Letter' : 'Edit Letter'}"
                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                >

        <p:growl for="chosen-recipient-form" />
        <p:spacer height="5px" />

        <div   class="ui-g data-container">
            <div class="ui-g-12 ui-md-4 ui-lg-4 data_field">
                <h:form id="nov-date-form">

                    <h2>Date of record</h2>
                    <p:datePicker 	    id="noticeDateOfRecord"
                                       value="#{noticeOfViolationBB.currentNotice.dateOfRecord}" 
                                       rendered="true"
                                       style="width: 100%;"
                                       pattern="MM/dd/yyyy HH:mm"
                                       disabled="false"
                                       hideOnDateTimeSelect="true"
                                       showOnFocus="false"
                                       showIcon="true"
                                       showButtonBar="true"
                                       mask="true"
                                       timeInput="true" 
                                       required="true" />


                    <h:message for="noticeDateOfRecord" showDetail="true" showSummary="true" 
                               warnClass="msgWarn" infoClass="msgInfo" fatalClass="msgFatal" errorClass="msgError" />

                </h:form>
            </div>

            <div class="ui-g-12 ui-md-4 ui-lg-4 data_field">


                <h2>Recipient</h2>

                <h:form id="chosen-recipient-form">

                    <p:commandButton   id="nov-add-chooseperson-init-button"
                                       rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                       value="Choose addressee"  
                                       icon="fa fa-search"
                                       ajax="true"
                                       actionListener="#{noticeOfViolationBB.onChoosePersonInitButtonChange}"
                                       oncomplete="PF('nov-personchoose-dialog-var').show()"
                                       update="nov-chooseperson-list-form"/>


                    <h3>Notice recipient:</h3>

                    <div class="nov-chosen-recipeint">
                        <h:outputText   id="recip-addressee-name-ot"
                                        value="#{!empty noticeOfViolationBB.currentNotice.recipient
                                                 ? noticeOfViolationBB.currentNotice.recipient.name
                                                 :'No recipient selected'}" />
                        <p:spacer height="3px" />
                        <h:outputText id="recip-address-ot"
                                      value="#{!empty noticeOfViolationBB.currentNotice.recipientMailingAddress
                                               ? noticeOfViolationBB.currentNotice.recipientMailingAddress.addressPretty2LineEscapeFalse
                                               : 'No address selected'}"
                                      escape="false"/>
                    </div>
                </h:form>
            </div>

            <div class="ui-g-12 ui-md-4 ui-lg-4 data_field">
                <h2>Notifying Officer</h2>

                <h:form id="notifyingofficer-form">


                    <p:outputLabel styleClass="data_field_label">
                        <h:outputText value="Current Notifying Officer"/>
                    </p:outputLabel>

                    <div class="signature">
                        <h:outputText   id="notifyingofficer-person-ot1"
                                        value="#{noticeOfViolationBB.currentNotice.notifyingOfficer.human.name}" />
                        <p:spacer height="2px" />
                        <h:outputText   id="notifyingofficer-person-ot2"
                                        value="#{noticeOfViolationBB.currentNotice.notifyingOfficer.human.jobTitle}" />

                    </div>


                    <p:outputLabel for="nov-notifyingofficer-som"
                                   styleClass="data_field_label">
                        <h:outputText value="Change notifying officer"/>
                    </p:outputLabel>


                    <div class="restrict-main-contents-io-content">
                        <p:selectOneMenu  id="nov-notifyingofficer-som" 
                                          tabindex="1" 
                                          value="#{noticeOfViolationBB.notifyingOfficerCandidateChosen}"
                                          >
                            <f:selectItem itemLabel="select a notifying officer user" 
                                          noSelectionOption="true" 
                                          itemDisabled="true"/>
                            <f:selectItems id="nov-notifyingsender-selitems" 
                                           value="#{systemServicesBB.bbSessionMuni.swornOfficerList}" 
                                           var="usr" itemValue="#{usr}" itemLabel="#{usr.human.name} (username: #{usr.username})" />
                            <f:converter converterId="userConverter" />
                        </p:selectOneMenu>

                    </div>

                    <p:commandButton icon="fa fa-link"
                                     actionListener="#{noticeOfViolationBB.changeNotifyingOfficer}" 
                                     ajax="true" 
                                     value="change notifying officer"
                                     update="notifyingofficer-person-ot1
                                     notifyingofficer-person-ot2"/>                                    
                </h:form>
            </div>
        </div>

        <h:form id="nov-preview-textbefore-form">
            <div class="link-button-container">
                <p:growl id="noticesave-growl"
                         for="nov-draft-save-cb" />

                <p:commandButton    id="nov-insert-new-cb"
                                    ajax="false"
                                    action="#{noticeOfViolationBB.onInsertNewNoticeButtonChange}"
                                    value="Done: Create new notice draft"
                                    update="violation-table nov-growl-form"
                                    icon="fa fa-save"
                                    disabled="#{noticeOfViolationBB.currentNotice.noticeID != 0}"/>

                <p:commandButton    id="nov-draft-save-cb"
                                    ajax="false"
                                    action="#{noticeOfViolationBB.onUpdateNoticeButtonChange}"
                                    value="Update notice text"
                                    update="violation-table nov-growl-form"
                                    icon="fa fa-edit"
                                    disabled="#{noticeOfViolationBB.currentNotice.noticeID == 0}"/>
            </div>

            <p:spacer height="3px" />
            <h4>Letter text before violations</h4>
            <p:textEditor value="#{noticeOfViolationBB.currentNotice.noticeTextBeforeViolations}"
                          height="200"
                          secure="false"
                          disabled="#{!(empty noticeOfViolationBB.currentNotice.lockedAndqueuedTS)}"
                          />
        </h:form>

        <h2>Code violations</h2>

        <h:form id="nov-violation-configuration-form">


            <p:dataTable
                id="violation-table"
                var="v"
                rowKey="#{v.violationID}"
                value="#{noticeOfViolationBB.currentNotice.violationList}"
                tableStyleClass="primeDataTable"
                expandedRow="false"
                rowExpandMode="multiple"
                draggableColumns="true"
                reflow="true"
                rowStyleClass="spacier-rows"
                editMode="cell"
                editable="true">


                <!--<p:ajax event="rowSelect" update="selectedRowLabel"/>-->

                <p:column width="4%">
                    <p:rowToggler />
                </p:column>

                <p:column width="10%">
                    <p:commandButton ajax="true"
                                     action="#{noticeOfViolationBB.removeViolationFromList(v)}"
                                     value="remove"
                                     update="violation-table nov-growl-form"
                                     icon="fa fa-stop" />
                </p:column>
                <p:column width="15%">
                    <f:facet name="header">
                        <h:outputText value="Ordinance" />
                    </f:facet>
                    <h:outputText value="#{v.violatedEnfElement.ordSecTitle}: #{v.violatedEnfElement.ordSubSecTitle}"/>
                </p:column>

                <p:column width="15%">
                    <f:facet name="header">
                        <h:outputText value="Stip Comp Date" />
                    </f:facet>
                    <h:outputText value="#{noticeOfViolationBB.getPrettyDateNoTime(v.stipulatedComplianceDate)}"/>
                </p:column>

                <p:column width="5%">
                    <f:facet name="header">
                        <h:outputText value="Days left" />
                    </f:facet>
                    <h:outputText value="#{empty v.actualComplianceDate ? v.daysUntilStipulatedComplianceDate: null}"/>
                </p:column>

                <p:column width="10%">
                    <f:facet name="header">
                        <h:outputText value="Include ord text?" />
                    </f:facet>
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{v.includeOrdinanceText}"/>
                        </f:facet>
                        <f:facet name="input">
                            <p:selectBooleanCheckbox value="#{v.includeOrdinanceText}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column width="10%">
                    <f:facet name="header">
                        <h:outputText value="Photos?" />
                    </f:facet>
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{v.includeViolationPhotos}"/>
                        </f:facet>
                        <f:facet name="input">
                            <p:selectBooleanCheckbox value="#{v.includeViolationPhotos}"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>


                <p:rowExpansion>
                    <div class="outlinedBox">
                        <h3>Violation details</h3>

                        <h:outputText value="ID: " />
                        <h:outputText value="#{v.violationID}"/>

                        <h:outputText value="Citations: " />
                        <h:outputText value="#{v.citationListAsString}"/>

                        <h:outputText value="re-link" />
                        <p:commandButton icon="fa fa-link"
                                         actionListener="#{caseProfileBB.setSelectedViolation(v)}" 
                                         ajax="true" 
                                         oncomplete="PF('linkDialog').show()"/>

                        <h:outputLabel styleClass="bold" value="Violated Element Details: "/>
                        <h:outputLabel value="#{v.violatedEnfElement.ordchapterTitle}:
                                       #{v.violatedEnfElement.ordSecNum}
                                       #{v.violatedEnfElement.ordSecTitle}:
                                       #{v.violatedEnfElement.ordSubSecNum}
                                       #{v.violatedEnfElement.ordSubSecTitle}"/>
                        <p:spacer height="5px"/>

                        <h:outputText styleClass="mono" value="#{v.violatedEnfElement.ordTechnicalText}"/>

                        <p:spacer height="5px"/>

                        <h:outputLabel styleClass="bold" value="Penalty:"/>
                        <h:outputText value="#{v.penalty}"/>
                        <p:spacer height="5px"/>

                        <h:outputLabel styleClass="bold" value="Description: "/>
                        <h:outputText value="#{v.description}"/>

                        <p:spacer height="5px"/>

                        <h:outputLabel styleClass="bold" value="Violation Notes: "/>
                        <h:outputText value="#{v.notes}" escape="false"/>
                    </div>
                </p:rowExpansion>

            </p:dataTable>

            <script type="text/javascript">

                $(function () {
                    $.extend(PF("datatable"), {
                        onKeyDown: function (e) {
                            var key = e.which,
                                    keyCode = $.ui.keyCode;

                            if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                e.preventDefault();
                            }
                        },

                        onKeyUp: function (e, rowIndex) {
                            var key = e.which,
                                    keyCode = $.ui.keyCode;
                            //.ui-row-editor-check .ui-icon-check .ui-c
                            if ((key === keyCode.ENTER || key === keyCode.NUMPAD_ENTER)) {
                                this.tbody
                                        .find('.ui-row-editor .ui-icon-check')
                                        .eq(rowIndex)
                                        .click();
                            }

                            if (key === keyCode.ESCAPE) {
                                this.tbody
                                        .find('.ui-row-editor .ui-icon-close')
                                        .eq(rowIndex)
                                        .click();
                            }
                        }
                    });
                });

            </script>

        </h:form>

        <h:form id="nov-preview-textafter-form">
            <p:spacer height="10px" />
            <h4>Letter text after violations</h4>
            <p:textEditor value="#{noticeOfViolationBB.currentNotice.noticeTextAfterViolations}"
                          height="200"
                          secure="false"
                          disabled="#{!(empty noticeOfViolationBB.currentNotice.lockedAndqueuedTS)}"
                          />
        </h:form>



        <p:spacer height="15px" />

        <h:form id="nov-submission-form">
            <ui:remove>

                <h2>signature</h2>

                <p>
                    <h:outputText value="#{noticeOfViolationBB.currentNotice.notifyingOfficerPerson.name}" />
                    <p:spacer height="3px" />
                    <h:outputText value="#{noticeOfViolationBB.currentNotice.notifyingOfficerPerson.jobTitle}" />
                    <p:spacer height="3px" />
                    <h:outputText value="#{!empty noticeOfViolationBB.currentNotice.notifyingOfficerPerson.phoneList 
                                           ? noticeOfViolationBB.currentNotice.notifyingOfficerPerson.phoneList.get(0)
                                           :''}" />
                    <h:outputText value=" | " />
                    <h:outputText value="#{!empty noticeOfViolationBB.currentNotice.notifyingOfficerPerson.emailList 
                                           ? noticeOfViolationBB.currentNotice.notifyingOfficerPerson.emailList.get(0)
                                           :''}" />
                </p>
            </ui:remove>

            <div class="link-button-container">

                <p:commandButton    id="nov-insert-new-cb"
                                    ajax="false"
                                    action="#{noticeOfViolationBB.onInsertNewNoticeButtonChange}"
                                    value="Create new notice draft"
                                    update="violation-table nov-growl-form"
                                    icon="fa fa-save"
                                    disabled="#{noticeOfViolationBB.currentNotice.noticeID != 0}"/>

                <p:commandButton    id="nov-draft-save-cb"
                                    ajax="false"
                                    action="#{noticeOfViolationBB.onUpdateNoticeButtonChange}"
                                    value="Update notice text"
                                    update="violation-table nov-growl-form"
                                    icon="fa fa-edit"
                                    disabled="#{noticeOfViolationBB.currentNotice.noticeID == 0}"/>
            </div>


        </h:form>
    </p:dialog>


    <p:dialog   id="nov-personchoose-dialog"
                height="700" width="1000"
                widgetVar="nov-personchoose-dialog-var"
                closable="true"
                closeOnEscape="true"
                resizable="true"
                responsive="true"
                dynamic="true"
                modal="true"
                header="Choose Addressee"
                rendered="#{systemServicesBB.bbSessionUser.keyCard.hasEnfOfficialPermissions}"
                >

        <h:form id="nov-chooseperson-list-form">


            <div class="p-grid">
                <div class="p-col-6">
                    <p:commandButton    id="nov-chooseaddressee-address-done"
                                        ajax="true"
                                        rendered="true"
                                        tabindex="2"
                                        actionListener="#{noticeOfViolationBB.onCompleteRecipientAndAddressSelection}"
                                        value="Done! Return to NOV setup"
                                        oncomplete="PF('nov-personchoose-dialog-var').hide(); PF('nov-add-edit-dialog-var').show(); "
                                        update="nov-add-edit-dialog
                                        chosen-recipient-form
                                        nov-growl-form"
                                        icon="fa fa-check"
                                        />



                </div>

                <div class="p-col-6">
                    <div style="border: solid black; padding: 10px;">

                        <h2>Selected Recipient and Mailing Address</h2>
                        <h:outputText   id="recip-addressee-name-ot"
                                        value="#{!empty noticeOfViolationBB.selectedRecipientPerson
                                                 ? noticeOfViolationBB.selectedRecipientPerson.name
                                                 :''}" />
                        <p:spacer height="3px" />
                        <h:outputText id="recip-address-ot"
                                      value="#{!empty noticeOfViolationBB.selectedRecipAddr
                                               ? noticeOfViolationBB.selectedRecipAddr.addressPretty2LineEscapeFalse
                                               : ''}"
                                      escape="false"/>
                    </div>
                </div>
                <div class="p-col-6">

                    <p:commandLink    id="nov-chooseperson-perssearch-cb"
                                      value="search for persons / create new person"
                                      ajax="true"
                                      actionListener="#{personBB.onSelectAndLinkPersonsInit(sessionBean.sessProperty)}"
                                      style="color: blue; font-weight: bold;"
                                      oncomplete="PF('human-search-dialog-var').show(); PF('nov-personchoose-dialog-var').hide();"
                                      update="human-search-dialog
                                      search-query-form
                                      log-form
                                      pers-search-results-form
                                      pers-selected-form
                                      hlh-humlist-form">
                        <f:param name="person-list-component-to-update" value="nov-chooseperson-list-form:newRecipientPersonTD" />
                    </p:commandLink>

                    <p:spacer height="3px" />

                    <h2>Person Links</h2>

                    <p>Showing all Persons currently connected to this case's property:
                        <h:outputText value="(Parcel ID: #{noticeOfViolationBB.currentCase.property.countyParcelID})" />
                    </p>


                    <p:spacer height="3px" />


                    <p:dataTable
                        id="newRecipientPersonTD"
                        var="recipers"
                        rowKey="#{recipers.humanID}"
                        value="#{noticeOfViolationBB.recipientPersonCandidateList}"
                        tableStyleClass="primeDataTable"
                        expandedRow="true"
                        rowExpandMode="multiple"
                        tabindex="1"
                        rowIndexVar="rowIndex">


                        <p:column width="5%">
                            <p:rowToggler />
                        </p:column>
                        <p:column width="40%">
                            <f:facet name="header">
                                <h:outputText value="Person" />
                            </f:facet>
                            <h:outputText value="#{recipers.name}"/>
                        </p:column>
                        <p:column width="15%">
                            <p:commandButton id="use-person-from-table-cb1"
                                             ajax="true"
                                             value="Select person"
                                             actionListener="#{noticeOfViolationBB.storeRecipient(recipers)}"
                                             tabindex="2"
                                             icon="fa fa-user-o"
                                             update="@form
                                             nov-growl-form
                                             nov-growl-form"
                                             />

                            <p:spacer height="3px" />

                            <p:commandLink id="edit-person-from-lookup-cb-1"
                                           ajax="true"
                                           rendered="false"
                                           value="View/edit person"
                                           oncomplete="PF('pers-selected-panel-var').show();"
                                           update="person-info-form
                                           person-profile-addresses-form
                                           person-profile-phones-form
                                           person-profile-emails-form
                                           person-links-form
                                           person-profile-dialog
                                           nov-growl-form"
                                           actionListener="#{personBB.onHumanViewLinkClick(recipers)}"
                                           />
                        </p:column>

                        <p:rowExpansion>
                            <p:repeat   id="pers-address-repeater"
                                        value="#{recipers.mailingAddressLinkList}"
                                        var="recipaddr">

                                <h:outputText value="#{recipaddr.addressPretty2LineEscapeFalse}"
                                              escape="false" />
                                <p:spacer height="3px" />
                                <p:commandLink id="recipient-address-select-link"
                                               ajax="true"
                                               style="color:blue;"
                                               value="Mail to this address"
                                               update="@form
                                               nov-growl-form"
                                               actionListener="#{noticeOfViolationBB.storeRecipientAddress(recipaddr)}"
                                               />
                                <p:spacer height="3px" />
                            </p:repeat>
                        </p:rowExpansion>
                    </p:dataTable>
                </div>

                <div class="p-col-6">

                    <p:commandLink      id="nov-addresses-add-cb"
                                        value="Link a new address to property" 
                                        ajax="true"
                                        actionListener="#{addressBB.onLinkPersonPropToAddressInitButtonChange(sessionBean.sessProperty)}"
                                        rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniReaderPermissions}"
                                        oncomplete="PF('address-search-dialog-var').show(); PF('nov-personchoose-dialog-var').hide();"
                                        style="color:blue; font-weight: bold;"
                                        update="address-search-dialog">
                        <f:param name="initiating-address-list-component-id" value="nov-chooseperson-list-form" />
                    </p:commandLink>
                    <p:spacer height="5px" />

                    <h2>Addresses Links</h2>

                    <p:spacer height="5px" />

                    <p:repeat   id="prop-addr-repeater"
                                value="#{sessionBean.sessProperty.mailingAddressLinkList}"
                                var="propaddr">
                        <h:outputText value="#{propaddr.addressPretty2LineEscapeFalse}"
                                      escape="false" />
                        <p:spacer height="3px" />
                        <p:commandLink id="prop-address-select-link"
                                       ajax="true"
                                       style="color:blue;"
                                       value="Mail NOV to this address"
                                       update="@form
                                       nov-growl-form"
                                       actionListener="#{noticeOfViolationBB.storeRecipientAddress(propaddr)}"
                                       />
                        <p:spacer height="3px" />
                        <hr />
                    </p:repeat>
                </div>
            </div>
        </h:form>
    </p:dialog>


    <!--start NOVTYPE-->

    <p:dialog   id="novtype-list-dialog"
                height="600" width="800" 
                widgetVar="novtype-list-dialog-var"
                closable="true"
                dynamic="true"
                modal="true"
                closeOnEscape="true"
                responsive="true"
                resizable="true"
                header="Letter Type Manager"
                >




        <!--panel:NOVType add/edit-->
        <p:panel id="novtype-addedit-panel"
                 toggleable="true"
                 widgetVar="novtype-addedit-panel-var"
                 collapsed="false"
                 header="Letter Types Toolbox">
            <h:form id="novtype-add-init-form">


                <p:commandButton id="novtype-create-init-button"
                                 value="Create new Letter Type"
                                 ajax="true"
                                 actionListener="#{noticeOfViolationBB.onNOVTypeAddInitButtonChange}"
                                 oncomplete="PF('novtype-addedit-dialog-var').show();"
                                 disabled="false"
                                 rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                                 icon="fa fa-plus"
                                 update="novtype-addedit-form"/>

                <p:spacer height="5px"/>
            </h:form>


        </p:panel>


        <!--panel:NOVType List-->
        <p:panel id="novtype-list-panel"
                 toggleable="true"
                 widgetVar="novtype-list-panel-var"
                 collapsed="false"
                 header="Letter Types">


            <h:form id="novtype-list-form">


                <p:dataTable id="novtype-datatable"
                             var="novt"
                             rowKey="#{novt.typeID}"
                             value="#{noticeOfViolationBB.novTypeList}"
                             tableStyleClass="primeDataTable"
                             draggableColumns="true"
                             resizableColumns="true">


                    <p:column width="15%">
                        <f:facet name="header">
                            <h:outputText value="Title"/>
                        </f:facet>

                        <h:outputText value="#{novt.title}"/>

                    </p:column>

                    <p:column width="20%"
                              sortBy="#{novt.muni.muniName}">
                        <f:facet name="header">
                            <h:outputText value="Municipality"/>
                        </f:facet>

                        <h:outputText value="#{novt.muni.muniName}"
                                      rendered="#{!empty novt.muni}"/>
                    </p:column>

                    <p:column width="20%"
                              sortBy="#{novt.injectViolations}">
                        <f:facet name="header">
                            <h:outputText value="Inject Viols?"/>
                        </f:facet>

                        <h:outputText value="#{novt.injectViolations}" />
                    </p:column>

                    <p:column width="20%">
                        <f:facet name="header">
                            <h:outputText value="Actions"/>
                        </f:facet>


                        <p:commandLink  id="novtype-view-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onNOVTypeView(novt)}"
                                        value="view"
                                        style="color:blue; font-weight: bold;"
                                        oncomplete="PF('novtype-addedit-dialog-var').show();"
                                        rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                                        update="novtype-addedit-dialog
                                        novtype-addedit-form"/>

                        <p:spacer height="5px" />



                        <p:commandLink  id="novtype-deac-init-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onDeactivateNOVTypeInit(novt)}"
                                        value="remove"
                                        style="color:blue; font-weight: bold;"
                                        oncomplete="PF('novtype-deactivate-confirm-dialog-var').show();"
                                        rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"/>

                        <p:spacer height="5px" />
                        <h:outputText value="(ID: #{novt.typeID})" />
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:panel>
    </p:dialog>


    <p:dialog id="novtype-addedit-dialog"
              widgetVar="novtype-addedit-dialog-var"
              width="1200"
              height="600"
              header="Add/Edit Letter Type: #{noticeOfViolationBB.currentNOVType.typeID eq 0 ? 'New Record':noticeOfViolationBB.currentNOVType.typeID}"
              modal="true"
              dynamic="true"
              resizable="true"
              closable="true"
              closeOnEscape="true"
              >
        <h:form id="novtype-addedit-form">

            <p:commandButton id="novtype-edittoggle-button"
                             value="#{noticeOfViolationBB.editModeNOVType ? 'Save changes':'Edit'}"
                             rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                             icon="fa #{noticeOfViolationBB.editModeNOVType ? 'fa-check' : 'fa-pencil'}"
                             actionListener="#{noticeOfViolationBB.onToggleEditModeNOVType}"
                             oncomplete="PF('novtype-addedit-dialog-var').show();"
                             update="@form
                             @form:@parent:novtype-list-form
                             nov-growl-form"/>

            <div class="gray_button">

                <p:commandButton id="inspections-inspectiondetails-abort"
                                 value="Cancel"
                                 styleClass="gray-button"
                                 rendered="#{noticeOfViolationBB.editModeNOVType}"
                                 icon="fa fa-stop"
                                 actionListener="#{noticeOfViolationBB.onNOVTypeEditAbort}"
                                 oncomplete="PF('novtype-addedit-dialog-var').show();"
                                 update="@form
                                 @form:@parent:nov-growl-form"/>
            </div>



            <p:spacer height="5px"/>

            <p:panel id="novtype-addedit-panel"
                     toggleable="true"
                     collapsed="false"
                     header="General">

                <div class="p-grid">

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="ID" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.typeID == 0 ? 'New record':noticeOfViolationBB.currentNOVType.typeID}" 
                                      rendered="true"/>
                    </div>
                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Title" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.title}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}"/>

                        <p:inputText value="#{noticeOfViolationBB.currentNOVType.title}" 
                                     style="width:100%" 
                                     rendered="#{noticeOfViolationBB.editModeNOVType}"/>
                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Description" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.description}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}"/>

                        <p:inputText value="#{noticeOfViolationBB.currentNOVType.description}" 
                                     style="width:100%" 
                                     rendered="#{noticeOfViolationBB.editModeNOVType}"/>

                    </div>
                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Default follow-up window" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.followUpWindowDays}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}"/>

                        <p:inputNumber value="#{noticeOfViolationBB.currentNOVType.followUpWindowDays}" 
                                     style="width:100%" 
                                     rendered="#{noticeOfViolationBB.editModeNOVType}"/>

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Event Category: Letter Sent" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.eventCatSent.eventCategoryTitle} (ID:#{noticeOfViolationBB.currentNOVType.eventCatSent.categoryID})" 
                                      rendered="#{!empty noticeOfViolationBB.currentNOVType.eventCatSent}"/>

                        <p:commandLink  id="novtype-eventcat-choose-sent-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onChooseEventCatInit}"
                                        value="choose event category"
                                        style="color:blue; font-weight: bold;"
                                        oncomplete="PF('novtype-eventcats-dialog-var').show();"
                                        update="novtype-eventcats-form"
                                        rendered="#{noticeOfViolationBB.editModeNOVType}" >
                            <f:param name="novtype-eventcat-field" 
                                     value="sent" />
                        </p:commandLink>

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Event Category: Letter Follow-up" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.eventCatFollowUp.eventCategoryTitle} (ID:#{noticeOfViolationBB.currentNOVType.eventCatFollowUp.categoryID})" 
                                      rendered="#{!empty noticeOfViolationBB.currentNOVType.eventCatFollowUp}"/>

                        <p:spacer height="3px" />
                        <p:commandLink  id="novtype-eventcat-followup-sent-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onChooseEventCatInit}"
                                        value="choose event category"
                                        style="color:blue; font-weight: bold;"
                                        oncomplete="PF('novtype-eventcats-dialog-var').show();"
                                        update="novtype-eventcats-form"
                                        rendered="#{noticeOfViolationBB.editModeNOVType}">
                            <f:param name="novtype-eventcat-field" 
                                     value="followup" />
                        </p:commandLink>

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Event Category: Letter Returned" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.eventCatReturned.eventCategoryTitle} (ID:#{noticeOfViolationBB.currentNOVType.eventCatReturned.categoryID})" 
                                      rendered="#{!empty noticeOfViolationBB.currentNOVType.eventCatReturned}"/>

                        <p:spacer height="3px" />
                        <p:commandLink  id="novtype-eventcat-choose-returned-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onChooseEventCatInit}"
                                        value="choose event category"
                                        style="color:blue; font-weight: bold;"
                                        oncomplete="PF('novtype-eventcats-dialog-var').show();"
                                        update="novtype-eventcats-form"
                                        rendered="#{noticeOfViolationBB.editModeNOVType}" >
                            <f:param name="novtype-eventcat-field" 
                                     value="returned" />
                        </p:commandLink>

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Text block category" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.textBlockCategory.title} (ID:#{noticeOfViolationBB.currentNOVType.textBlockCategory.categoryID})"
                                      rendered="#{!noticeOfViolationBB.editModeNOVType and !empty noticeOfViolationBB.currentNOVType.textBlockCategory}" />
                        <p:selectOneMenu 
                            id="novtype-textblockcat-som" 
                            tabindex="1"
                            value="#{noticeOfViolationBB.currentNOVType.textBlockCategory}"
                            required="false"
                            rendered="#{noticeOfViolationBB.editModeNOVType}">

                            <f:selectItem itemLabel="select a text block category..." 
                                          noSelectionOption="true" 
                                          itemDisabled="true"/>
                            <f:selectItems value="#{noticeOfViolationBB.blockCatList}" 
                                           var="tbc" 
                                           itemLabel="#{tbc.title} (ID:#{tbc.categoryID})"/>
                            <f:converter converterId="textBlockCategoryConverter" />
                        </p:selectOneMenu>
                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Print style" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.printStyle.description} (ID:#{noticeOfViolationBB.currentNOVType.printStyle.styleID})"
                                      rendered="#{!noticeOfViolationBB.editModeNOVType and !empty noticeOfViolationBB.currentNOVType.printStyle}" />

                        <p:selectOneMenu 
                            id="novtype-printstyle-som" 
                            tabindex="1"
                            value="#{noticeOfViolationBB.currentNOVType.printStyle}"
                            required="false"
                            rendered="#{noticeOfViolationBB.editModeNOVType}">

                            <f:selectItem itemLabel="select a print style..." 
                                          noSelectionOption="true" 
                                          itemDisabled="true"/>
                            <f:selectItems value="#{noticeOfViolationBB.printStyleList}" 
                                           var="pstyle" 
                                           itemLabel="#{pstyle.description} (ID:#{pstyle.styleID})"/>
                            <f:converter converterId="printStyleConverter" />
                        </p:selectOneMenu>



                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Header photo" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.novHeaderBlob.title} (ID:#{noticeOfViolationBB.currentNOVType.novHeaderBlob.photoDocID})"
                                      rendered="#{!noticeOfViolationBB.editModeNOVType and !empty noticeOfViolationBB.currentNOVType.novHeaderBlob}" />

                        <p:graphicImage     id="headerphoto-preview"
                                            value="#{blobsterBB.image}"
                                            alt="no preview available" 
                                            style="width: 50px; margin-right: 10px;" 
                                            cache="false"
                                            rendered="#{!empty noticeOfViolationBB.currentNOVType.novHeaderBlob}">
                            <f:param name="blobid" value="#{noticeOfViolationBB.currentNOVType.novHeaderBlob.photoDocID}"/>
                        </p:graphicImage>

                        <p:commandLink  id="novtype-chooseheader-cl" 
                                        ajax="true"
                                        actionListener="#{noticeOfViolationBB.onNOVTypeHeaderImageSelectInit}"
                                        value="choose header image"
                                        style="color:blue; font-weight: bold;"
                                        process="@none"
                                        oncomplete="PF('novtype-headerimage-dialog-var').show();"
                                        update="novtype-headerimage-form"
                                        rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions and noticeOfViolationBB.editModeNOVType}"/>



                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Municipality" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.muni.muniName} (Code:#{noticeOfViolationBB.currentNOVType.muni.muniCode})"
                                      rendered="#{!noticeOfViolationBB.editModeNOVType and !empty noticeOfViolationBB.currentNOVType.muni}" />
                        <p:selectOneMenu 
                            id="novtype-munilist-som" 
                            tabindex="1"
                            value="#{noticeOfViolationBB.currentNOVType.muni}"
                            required="false"
                            rendered="#{noticeOfViolationBB.editModeNOVType}">

                            <f:selectItem itemLabel="select a municipality..." 
                                          noSelectionOption="true" 
                                          itemDisabled="true"/>
                            <f:selectItems value="#{systemServicesBB.municipalityListForSearch}" 
                                           var="muni" 
                                           itemLabel="#{muni.muniName}"/>
                            <f:converter converterId="muniConverter" />
                        </p:selectOneMenu>

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Court Document" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.courtDocument ? 'Yes':'No'}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}" />
                        <p:selectBooleanCheckbox value="#{noticeOfViolationBB.currentNOVType.courtDocument}"
                                                 rendered="#{noticeOfViolationBB.editModeNOVType}"  />
                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Inject violations" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{noticeOfViolationBB.currentNOVType.injectViolations? 'Yes':'No'}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}" />
                        <p:selectBooleanCheckbox value="#{noticeOfViolationBB.currentNOVType.injectViolations}"
                                                 rendered="#{noticeOfViolationBB.editModeNOVType}"  />

                    </div>

                    <div class="p-col-4 restrict-data-field-label-inline">
                        <h:outputText value="Record status" />
                    </div>
                    <div class="p-col-8 restrict-data-field-value-inline">
                        <h:outputText value="#{empty noticeOfViolationBB.currentNOVType.deactivatedTS? 'Active':'Deactivated'}" 
                                      rendered="#{!noticeOfViolationBB.editModeNOVType}" />

                    </div>

                </div>
            </p:panel>
        </h:form>
    </p:dialog>

    <p:dialog id="novtype-eventcats-dialog"
              modal="true"
              height="500" 
              width="800"
              widgetVar="novtype-eventcats-dialog-var"
              closable="true"
              closeOnEscape="true"
              responsive="true"
              resizable="true"
              dynamic="true"
              header="Choose an event category for NOV Type #{noticeOfViolationBB.currentNOVType.title}"
              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
              >

        <h:form id="novtype-eventcats-form">

            <h4>

                <h:outputText value="Choose an event category to create for letter operation: #{noticeOfViolationBB.currentNovTypeEventCatField}" />
            </h4>

            <p:selectOneListbox id="eventtype-solb"
                                required="false"
                                value="#{noticeOfViolationBB.eventTypeSelected}"
                                >

                <p:ajax         listener="#{noticeOfViolationBB.onEventTypeListChange}"
                                update="@form
                                evcat-table"/>

                <f:selectItems value="#{noticeOfViolationBB.eventTypeCandidateList}"
                               var="et" 
                               itemLabel="#{et.label}"
                               itemValue="#{et}"/>
            </p:selectOneListbox>

            <p:spacer height="5px" />

            <h:outputText value="Choose a Category"/>

            <p:spacer height="5px" />

            <p:dataTable id="evcat-table"
                         value="#{noticeOfViolationBB.eventCatCandidateList}"
                         var="evcat"
                         rowKey="#{evcat.categoryID}">


                <p:column style="width:40%">
                    <f:facet name="header">
                        <h:outputText value="Category Title" />
                    </f:facet>
                    <h:outputText value="#{evcat.eventCategoryTitle}" />
                </p:column>

                <p:column style="width:40%">
                    <f:facet name="header">
                        <h:outputText value="Actions" />
                    </f:facet>

                    <h:outputText value="(ID: #{evcat.categoryID})" />

                    <p:spacer height="3px" />

                    <p:commandLink  id="evcat-select-cl" 
                                    ajax="true"
                                    actionListener="#{noticeOfViolationBB.onChooseEventCatCommit(evcat)}"
                                    value="select"
                                    style="color:blue; font-weight: bold;"
                                    oncomplete="PF('novtype-eventcats-dialog-var').hide();"
                                    update="novtype-addedit-form
                                    nov-growl-form"
                                    rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"/>
                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>

    <p:dialog id="novtype-headerimage-dialog"
              modal="true"
              height="500" 
              width="800"
              widgetVar="novtype-headerimage-dialog-var"
              closable="true"
              closeOnEscape="true"
              responsive="true"
              resizable="true"
              dynamic="true"
              header="Change the header photo on NOV Type: #{noticeOfViolationBB.currentNOVType.title}"
              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
              >

        <h:form id="novtype-headerimage-form">
            <p>These are image and doucments attached to your current Municipality's office parcel: 
                <br />
                <h:outputText value="#{systemServicesBB.bbSessionMuni.muniPropertyDH.address.addressPretty2LineEscapeFalse}"
                              escape="false" />

            </p>

            <p:spacer height="5px" />

            <p:dataTable id="novtype-blob-table"
                         value="#{noticeOfViolationBB.novHeaderImageCandidateList}"
                         var="headblob"
                         rowKey="#{headblob.photoDocID}"
                         resizableColumns="true"
                         >

                <p:column headerText="PhotoDoc ID"
                          style="width:5%;">
                    <h:outputText value="#{headblob.photoDocID}" />
                </p:column>
                <p:column headerText="Blob ID"
                          style="width:5%;">
                    <h:outputText value="#{headblob.bytesID}" />
                </p:column>

                <p:column headerText="Type"
                          style="width:10%;">
                    <h:outputText value="#{headblob.type.title}" />
                </p:column>
                <p:column headerText="Timestamp"
                          style="width:15%;">
                    <h:outputText value="#{headblob.createdTS}" />
                </p:column>
                <p:column headerText="Title / Descr"
                          style="width:20%;">
                    <h:outputText value="#{headblob.title}" />
                    <p:spacer height="5px" />
                    <h:outputText value="#{headblob.description}" />
                </p:column>
                <p:column headerText="Preview"
                          style="width:30%;">
                    <p:graphicImage value="#{blobsterBB.image}"
                                    alt="no preview available" 
                                    style="width: 150px" 
                                    cache="false"
                                    rendered="#{headblob.type.browserViewable}">
                        <f:param name="blobid" value="#{headblob.photoDocID}"/>
                    </p:graphicImage>

                    <h:outputText value="no preview available; download to view"
                                  rendered="#{!headblob.type.browserViewable}" />
                </p:column>
                <p:column headerText="Actions"
                          style="width:15%;">


                    <p:commandLink id="headblob-select-cl"
                                   actionListener="#{noticeOfViolationBB.onNOVTypeHeaderImageSelectBlobLinkClick(headblob)}"
                                   value="select as header"
                                   style="color:blue; font-weight: bold;"
                                   rendered="true"
                                   update="nov-growl-form
                                   novtype-addedit-form" 
                                   oncomplete="PF('novtype-headerimage-dialog-var').hide();"/>

                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>



    <!--p:dialog|permit-nullify-confirm-dialog-->
    <p:dialog id="novtype-deactivate-confirm-dialog"
              widgetVar="novtype-deactivate-confirm-dialog-var"
              header="Confirm Letter Type Deactivation"
              closable="true"
              closeOnEscape="true">

        <h:form id="novtype-dectivate-form">

            <p>This deactivation option cannot be undone through the web interface.</p>
            <p:spacer height="3px" />
            <p:commandButton  id="novtype-deactivate-commit-button" 
                              ajax="true"
                              actionListener="#{noticeOfViolationBB.onDeactivateNOVTypeCommit}"
                              value="Commit deactivation of letter type ID:#{noticeOfViolationBB.currentNOVType.typeID}"
                              icon="fa fa-trash"
                              rendered="#{systemServicesBB.bbSessionUser.keyCard.hasMuniStaffPermissions}"
                              update="novtype-list-form"
                              oncomplete="PF('novtype-deactivate-confirm-dialog-var').hide();"/>

        </h:form>
    </p:dialog>

    <!--end NOVTYPE-->



    <p:confirmDialog id= "howto-violation-add-panel"
                     widgetVar="howto-violation-add-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Adding a code violation to a case"
                     >
        <p>Bullets, screen shots, etc.</p>

    </p:confirmDialog>

    <p:confirmDialog id="howto-notices-panel"
                     widgetVar="howto-notices-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Generating a notice of violation"
                     >

        <p>Click "Build new notice" in the section "Notices of Violation"</p>

    </p:confirmDialog>


    <p:confirmDialog id="howto-insidetimeframe-panel"
                     widgetVar="howto-insidetimeframe-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Monitoring a case during compliance timeframe"
                     >

        <p>Violation compliance timeframe is still open. Passively monitor the property for changes that might impact case management.</p>

    </p:confirmDialog>


    <p:confirmDialog id="howto-expiredtimeframe-panel"
                     widgetVar="howto-expiredtimeframe-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Pathways after compliance window expiery"
                     >

        <ol>
            <li>Visit the property and re-inspect the code violations attached to the case</li>
            <li>If compliance has been achieved, mark the violations as such</li>
            <li>If the violation is outstanding, discuss issue with property owner or tenants</li>
            <li>Extend compliance window</li>
            <li>Issue a citation</li>
        </ol>

    </p:confirmDialog>


    <p:confirmDialog id="howto-recordhearingdate-panel"
                     widgetVar="howto-recordhearingdate-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Recording a scheduled hearing"
                     >

        <p>Click: Log new event</p>

    </p:confirmDialog>


    <p:confirmDialog id="howto-hearingprep-panel"
                     widgetVar="howto-hearingprep-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Preparing for a hearing"
                     >

        <p>Attach and annotate photographs</p>
        <p>Generate a case profile report</p>

    </p:confirmDialog>


    <p:confirmDialog id="howto-insidecourttimeframe-panel"
                     widgetVar="howto-insidecourttimeframe-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Monitoring a case during court-ordered compliance timeframe"
                     >

        <p>The court has extended the compliance timeframe, so mark violations with the new date</p>

    </p:confirmDialog>


    <p:confirmDialog id="howto-expiredcourttimeframe-panel"
                     widgetVar="howto-expiredcourttimeframe-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Options following court-ordered compliance timeframe expiery"
                     >

        <ol>
            <li>Visit the property and re-inspect the code violations attached to the case</li>
            <li>If compliance has been achieved, mark the violations as such</li>
            <li>If the violation is outstanding, discuss issue with property owner or tenants</li>
            <li>Extend compliance window</li>
            <li>Request a new court hearing</li>
        </ol>

    </p:confirmDialog>


    <p:confirmDialog id="howto-inactive-panel"
                     widgetVar="howto-inactive-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="Stalled case options"
                     >

        <ol>
            <li>Open a new case with the same violation and start the management cycle again</li>
        </ol>

    </p:confirmDialog>



    <p:confirmDialog id="howto-closed-panel"
                     widgetVar="howto-closed-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="About closed cases"
                     >

        <ul>
            <li>You may add events noting follow-up, but no new violations can be added</li>
            <li>If new code violations have been found, open a new case</li>
        </ul>

    </p:confirmDialog>



    <p:confirmDialog id="howto-container-panel"
                     widgetVar="howto-container-panel-var"
                     closable="true"
                     closeOnEscape="true"
                     responsive="true"
                     header="About container cases"
                     >

        <ul>
            <li>These are data storage containers that simply use the case infrastructure</li>
            <li>They cannot have new violations attached to them, nor any actions associated with violation mitigation</li>
        </ul>

    </p:confirmDialog>

</ui:composition>
